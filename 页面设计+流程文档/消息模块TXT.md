# 📱 消息模块架构设计文档

> **基于纯结构架构图标准模板的完整设计方案**
> 
> 版本：v1.0 | 创建时间：2025-09-26 | 设计标准：SMART-V+ & 4C+1

---

## 📋 **文档概览**

### 🎯 **模块定位**
- **核心功能**：用户消息通信、通知管理、社交互动
- **业务价值**：提升用户粘性、增强社交属性、完善通知体系
- **技术特点**：实时通信、多端同步、智能推送、状态管理

### 📊 **设计指标**
- **页面层级**：4层嵌套结构
- **子页面数量**：4个功能子页面（赞和收藏、评论、粉丝、系统通知）
- **扩展页面数量**：2个扩展页面（私聊对话、清除确认）
- **组件复用**：90%组件可复用
- **响应时间**：<300ms页面加载
- **并发支持**：10万+在线用户

---

## 🌳 **树状图（页面结构视角）**

```
【消息系统模块】★★★
│
├── 【消息主页面】📱（消息中心首页 - 白色背景）
│   ├── 📱 系统状态栏（9:41时间 + 信号电池显示）
│   │
│   ├── 🔝 消息导航栏（固定头部 - 高度56px - 白色背景）
│   │   ├── 📝 页面标题 "消息"（居中 - 18sp黑色粗体）
│   │   └── 🔧 功能设置图标（右上角 - 灰色图标 24x24px）
│   │       ├── 点击效果：0.2s缩放动画
│   │       └── 跳转功能：进入消息设置页面
│   │
│   ├── 🏷️ 消息分类功能区（顶部功能卡片区 - 高度120px）
│   │   └── 《消息类型卡片组》📋（4宫格布局 - 水平居中分布）
│   │       ├── 💖《赞和收藏卡片》📋（左上角 - 80x80px卡片）
│   │       │   ├── 📱 卡片容器（白色背景 + 圆角12px + 阴影2px）
│   │       │   ├── 💖 功能图标（顶部居中 - 粉色爱心 32x32px）
│   │       │   │   ├── 图标样式：渐变粉色#FF69B4背景 + 白色爱心图标
│   │       │   │   ├── 图标动效：点击时0.3s心跳动画
│   │       │   │   └── 未读标识：右上角红色小圆点（有未读时显示）
│   │       │   ├── 📝 功能标题 "赞和收藏"（底部 - 14sp黑色）
│   │       │   ├── 点击区域：整个卡片可点击（0.1s背景色变化）
│   │       │   └── 跳转功能：进入赞和收藏消息列表
│   │       │
│   │       ├── 💬《评论卡片》📋（右上角 - 相同尺寸规格）
│   │       │   ├── 📱 卡片容器（相同样式规格）
│   │       │   ├── 💬 功能图标（蓝色对话框 32x32px）
│   │       │   │   ├── 图标样式：蓝色#4A90E2背景 + 白色对话框图标
│   │       │   │   ├── 🔴 未读数量角标 "1"（右上角 - 红色圆形角标）
│   │       │   │   │   ├── 角标样式：16x16px + 红色#FF3B30背景 + 白色数字
│   │       │   │   │   ├── 角标位置：图标右上角-2px偏移
│   │       │   │   │   └── 数量显示：1-99显示数字，99+显示"99+"
│   │       │   │   └── 图标动效：有新消息时轻微震动效果
│   │       │   ├── 📝 功能标题 "评论"（底部 - 14sp黑色）
│   │       │   └── 跳转功能：进入评论消息列表
│   │       │
│   │       ├── 👥《粉丝卡片》📋（左下角 - 相同尺寸规格）
│   │       │   ├── 📱 卡片容器（相同样式规格）
│   │       │   ├── 👥 功能图标（橙色用户群 32x32px）
│   │       │   │   ├── 图标样式：橙色渐变#FF8C00背景 + 白色用户群图标
│   │       │   │   └── 图标动效：点击时0.2s缩放效果
│   │       │   ├── 📝 功能标题 "粉丝"（底部 - 14sp黑色）
│   │       │   └── 跳转功能：进入粉丝消息列表
│   │       │
│   │       └── 🔔《系统通知卡片》📋（右下角 - 相同尺寸规格）
│   │           ├── 📱 卡片容器（相同样式规格）
│   │           ├── 🔔 功能图标（蓝色铃铛 32x32px）
│   │           │   ├── 图标样式：蓝色#5856D6背景 + 白色铃铛图标
│   │           │   └── 图标动效：有新通知时摇摆动画
│   │           ├── 📝 功能标题 "系统通知"（底部 - 14sp黑色）
│   │           └── 跳转功能：进入系统通知列表
│   │
│   ├── 📋 最近消息对话列表（主要内容区域 - 可滚动）
│   │   └── 《对话列表容器》📋（垂直滚动列表）
│   │       ├── 💬《对话项1》📋（对话卡片 - 高度80px）
│   │       │   ├── 📱 卡片容器（白色背景 + 底部分隔线1px灰色#E5E5E5）
│   │       │   ├── 👤 左侧头像区域（左边距16px - 垂直居中）
│   │       │   │   ├── 🖼️ 用户头像（圆形48x48px - 默认头像）
│   │       │   │   │   ├── 头像样式：圆形裁剪 + 2px白色边框
│   │       │   │   │   ├── 头像加载：渐进式加载 + 占位图
│   │       │   │   │   └── 在线状态：右下角绿色小圆点（在线时显示）
│   │       │   │   └── 🔴 未读消息角标 "1"（头像右上角）
│   │       │   │       ├── 角标样式：14x14px + 红色#FF3B30背景 + 白色数字
│   │       │   │       └── 角标位置：头像右上角-2px偏移
│   │       │   ├── 📝 中央消息信息区域（左边距16px - 右边距16px）
│   │       │   │   ├── 📝 用户昵称行（顶部对齐）
│   │       │   │   │   ├── "用户名称123" 昵称（16sp黑色粗体）
│   │       │   │   │   └── 🕐 消息时间 "1分钟前"（右对齐 - 12sp灰色#999999）
│   │       │   │   │       ├── 时间格式：刚刚/X分钟前/X小时前/MM-DD
│   │       │   │   │       └── 时间更新：实时更新机制
│   │       │   │   └── 📝 最后消息预览行（昵称下方6px间距）
│   │       │   │       ├── 消息内容 "你的作品好棒，可以加个微信吗..."（14sp灰色#666666）
│   │       │   │       ├── 文字显示：单行显示，超出显示"..."
│   │       │   │       ├── 消息类型标识：[图片]/[语音]/[视频]等前缀
│   │       │   │       └── 未读样式：未读消息加粗显示
│   │       │   └── 点击区域：整个卡片可点击进入对话详情
│   │       │
│   │       ├── 💬《对话项2》📋（相同结构 - 不同状态）
│   │       │   ├── 📱 卡片容器（相同样式）
│   │       │   ├── 👤 用户头像 "用户"（无未读角标）
│   │       │   ├── 📝 消息信息区域
│   │       │   │   ├── 昵称时间："用户" + "昨天"
│   │       │   │   └── 消息预览："你的作品好棒。"（已读状态 - 正常字重）
│   │       │   └── 🔻 右侧状态：已读状态（无指示器）
│   │       │
│   │       ├── 💬《对话项3》📋（相同结构 - 第三种状态）
│   │       │   ├── 📱 卡片容器（相同样式）
│   │       │   ├── 👤 用户头像 "用户名称123"（有未读角标）
│   │       │   ├── 📝 消息信息区域
│   │       │   │   ├── 昵称时间："用户名称123" + "06-10"
│   │       │   │   └── 消息预览："你的作品好棒，可以加个微信吗..."（未读 - 加粗）
│   │       │   └── 🔻 右侧状态：未读蓝色圆点
│   │       │
│   │       └── 🔄 列表控制机制
│   │           ├── 📊 加载更多：上滑自动加载历史对话
│   │           ├── 🔄 下拉刷新：下拉刷新最新消息
│   │           └── 🔚 到底提示："已经到底了"（灰色12sp）
│   │
│   └── 📱 底部导航栏（固定底部 - Tab导航）
│       ├── 🏠「首页」Tab（未选中状态 - 灰色图标）
│       ├── 🔍「发现」Tab（未选中状态 - 灰色图标）
│       ├── 💬「消息」Tab（选中状态 - 紫色图标 + 文字）
│       │   ├── 选中样式：紫色#8A2BE2图标 + 紫色文字
│       │   └── 未读角标：Tab图标右上角红色数字角标
│       └── 👤「我的」Tab（未选中状态 - 灰色图标）
│
├── 【消息功能子页面群】📱（从主页面跳转的相关子页面）
│   ├── 【赞和收藏消息页面】📱（赞和收藏消息列表页）
│   │   ├── 📱 系统状态栏（9:41时间 + 信号电池显示）
│   │   │
│   │   ├── 🔝 页面导航栏（固定头部 - 高度56px - 白色背景）
│   │   │   ├── 🔙「<」返回按钮（左上角 - 黑色箭头图标 24x24px）
│   │   │   ├── 📝 页面标题 "赞和收藏"（居中 - 18sp黑色粗体）
│   │   │   └── 🧹「清空」按钮（右上角 - 灰色文字 16sp）
│   │   │       ├── 点击效果：弹出确认对话框
│   │   │       └── 清空功能：清除所有赞和收藏消息
│   │   │
│   │   └── 📋 赞和收藏消息列表（主要内容区域 - 可滚动）
│   │       └── 《消息列表容器》📋（垂直滚动列表）
│   │           ├── 💖《赞和收藏消息项1》📋（消息卡片 - 高度100px）
│   │           │   ├── 📱 卡片容器（白色背景 + 底部分隔线1px灰色）
│   │           │   ├── 👤 左侧头像区域（左边距16px）
│   │           │   │   ├── 🖼️ 用户头像（圆形48x48px）
│   │           │   │   │   ├── 头像样式：圆形裁剪 + 2px白色边框
│   │           │   │   │   └── 点击功能：查看用户详情页面
│   │           │   │   └── 💖 操作类型图标（头像右下角）
│   │           │   │       ├── 图标样式：红色爱心 16x16px + 白色边框
│   │           │   │       └── 图标含义：表示点赞操作
│   │           │   ├── 📝 中央消息信息区域（左边距16px - 右边距80px）
│   │           │   │   ├── 📝 用户操作信息行（顶部）
│   │           │   │   │   ├── "用户名称123" 用户昵称（16sp黑色粗体）
│   │           │   │   │   ├── 💖 操作描述 "点赞了你的评论"（16sp灰色）
│   │           │   │   │   └── 🕐 操作时间 "1分钟前"（右侧 - 12sp灰色）
│   │           │   │   └── 📝 相关内容预览行（操作信息下方6px间距）
│   │           │   │       ├── 内容文字 "这里是评论 这里是评论 这里是评论"（14sp灰色）
│   │           │   │       ├── 文字显示：最多2行，超出显示"..."
│   │           │   │       └── 点击功能：跳转到相关内容详情
│   │           │   ├── 🖼️ 右侧内容缩略图（右边距16px - 垂直居中）
│   │           │   │   ├── 📷 内容图片（方形48x48px - 圆角6px）
│   │           │   │   │   ├── 图片样式：圆角裁剪 + 1px浅灰边框
│   │           │   │   │   ├── 图片加载：占位图 + 渐进式加载
│   │           │   │   │   └── 点击功能：查看原内容详情
│   │           │   │   └── 🎬 内容类型标识（图片左下角）
│   │           │   │       ├── 图片内容：无标识
│   │           │   │       ├── 视频内容：播放图标overlay
│   │           │   │       └── 文字内容：文字图标overlay
│   │           │   └── 点击区域：整个卡片可点击查看详情
│   │           │
│   │           ├── 💖《赞和收藏消息项2》📋（相同结构 - 收藏操作）
│   │           │   ├── 📱 卡片容器（相同样式）
│   │           │   ├── 👤 用户头像 "用户名称123" + ⭐收藏图标
│   │           │   ├── 📝 消息信息区域
│   │           │   │   ├── 操作信息："用户名称123" + "收藏了你的作品" + "1分钟前"
│   │           │   │   └── 内容预览："这里是作品标题"
│   │           │   └── 🖼️ 作品缩略图（相同规格）
│   │           │
│   │           └── 🔄 列表控制（相同的加载更多机制）
│   │
│   ├── 【评论消息页面】📱（评论消息列表页）
│   │   ├── 📱 系统状态栏（9:41时间 + 信号电池显示）
│   │   │
│   │   ├── 🔝 页面导航栏（固定头部 - 相同规格）
│   │   │   ├── 🔙「<」返回按钮（相同样式）
│   │   │   ├── 📝 页面标题 "评论"（居中 - 18sp黑色粗体）
│   │   │   └── 🧹「清空」按钮（相同功能）
│   │   │
│   │   └── 📋 评论消息列表（主要内容区域 - 可滚动）
│   │       └── 《评论列表容器》📋（垂直滚动列表）
│   │           ├── 💬《评论消息项1》📋（评论卡片 - 高度100px）
│   │           │   ├── 📱 卡片容器（相同样式规格）
│   │           │   ├── 👤 左侧头像区域（相同规格）
│   │           │   │   ├── 🖼️ 用户头像（圆形48x48px）
│   │           │   │   └── 💬 评论类型图标（蓝色对话框 16x16px）
│   │           │   ├── 📝 中央评论信息区域（相同布局）
│   │           │   │   ├── 📝 用户评论信息行
│   │           │   │   │   ├── "用户名称123" 用户昵称（16sp黑色粗体）
│   │           │   │   │   ├── 💬 操作描述 "评论了你的作品"（16sp灰色）
│   │           │   │   │   └── 🕐 评论时间 "1分钟前"（12sp灰色）
│   │           │   │   └── 📝 评论内容预览行
│   │           │   │       ├── 评论文字 "这里是作品标题"（14sp黑色）
│   │           │   │       ├── 文字显示：最多2行显示
│   │           │   │       └── 点击功能：查看完整评论和回复
│   │           │   ├── 🖼️ 右侧内容缩略图（相同规格）
│   │           │   └── 点击区域：整个卡片可点击
│   │           │
│   │           └── 🔄 列表控制（相同的加载更多机制）
│   │
│   ├── 【粉丝消息页面】📱（粉丝关系消息列表页）
│   │   ├── 📱 系统状态栏（9:41时间 + 信号电池显示）
│   │   │
│   │   ├── 🔝 页面导航栏（固定头部 - 相同规格）
│   │   │   ├── 🔙「<」返回按钮（相同样式）
│   │   │   ├── 📝 页面标题 "粉丝"（居中 - 18sp黑色粗体）
│   │   │   └── 🧹「清空」按钮（相同功能）
│   │   │
│   │   └── 📋 粉丝消息列表（主要内容区域 - 可滚动）
│   │       └── 《粉丝列表容器》📋（垂直滚动列表）
│   │           ├── 👥《粉丝消息项1》📋（粉丝卡片 - 高度80px）
│   │           │   ├── 📱 卡片容器（相同样式规格）
│   │           │   ├── 👤 左侧头像区域（相同规格）
│   │           │   │   ├── 🖼️ 用户头像（圆形48x48px）
│   │           │   │   └── 👥 关注类型图标（橙色用户图标 16x16px）
│   │           │   ├── 📝 中央关注信息区域（占据主要宽度）
│   │           │   │   ├── 📝 用户关注信息行
│   │           │   │   │   ├── "用户名称123" 用户昵称（16sp黑色粗体）
│   │           │   │   │   ├── 👥 操作描述 "关注了你"（16sp灰色）
│   │           │   │   │   └── 🕐 关注时间 "1分钟前"（12sp灰色）
│   │           │   │   └── 📝 用户简介预览行（可选显示）
│   │           │   │       ├── 简介文字 "这里是用户的个性签名..."（14sp灰色）
│   │           │   │       └── 文字显示：单行显示，超出显示"..."
│   │           │   ├── 🔻 右侧操作区域（右边距16px）
│   │           │   │   └── 💜「互相关注」按钮（关注状态按钮）
│   │           │   │       ├── 按钮尺寸：80x32px + 圆角16px
│   │           │   │       ├── 按钮样式：紫色背景 + 白色文字 + 14sp字体
│   │           │   │       ├── 状态切换：关注/已关注/互相关注
│   │           │   │       └── 点击效果：0.2s缩放动画 + 状态更新
│   │           │   └── 点击区域：整个卡片可点击查看用户详情
│   │           │
│   │           └── 🔄 列表控制（相同的加载更多机制）
│   │
│   └── 【系统通知页面】📱（系统通知消息列表页）
│       ├── 📱 系统状态栏（9:41时间 + 信号电池显示）
│       │
│       ├── 🔝 页面导航栏（固定头部 - 相同规格）
│       │   ├── 🔙「<」返回按钮（相同样式）
│       │   ├── 📝 页面标题 "系统通知"（居中 - 18sp黑色粗体）
│       │   └── 🧹「清空」按钮（相同功能）
│       │
│       └── 📋 系统通知列表（主要内容区域 - 可滚动）
│           └── 《通知列表容器》📋（垂直滚动列表）
│               ├── 🔔《系统通知项1》📋（系统通知卡片 - 高度100px）
│               │   ├── 📱 卡片容器（相同样式规格）
│               │   ├── 🔔 左侧系统图标区域（左边距16px）
│               │   │   ├── 🔔 系统图标（紫色铃铛 48x48px - 圆形背景）
│               │   │   │   ├── 图标样式：紫色圆形背景 + 白色铃铛图标
│               │   │   │   ├── 背景样式：渐变紫色 + 阴影效果
│               │   │   │   └── 通知类型：不同类型显示不同图标
│               │   │   └── 🎯 通知优先级标识（图标右上角）
│               │   │       ├── 🔴 重要通知：红色感叹号
│               │   │       ├── 🟡 普通通知：黄色圆点
│               │   │       └── 🔵 一般通知：蓝色圆点
│               │   ├── 📝 中央通知信息区域（左边距16px - 右边距16px）
│               │   │   ├── 📝 通知标题行（顶部）
│               │   │   │   ├── "完善个人资料" 通知标题（16sp黑色粗体）
│               │   │   │   └── 🕐 通知时间 "1分钟前"（右对齐 - 12sp灰色）
│               │   │   └── 📝 通知内容详情行（标题下方6px间距）
│               │   │       ├── 详情文字 "您的账号尚未完善个人资料，前往主页完善资料可以获得更多曝光，更快认识新朋友！"（14sp灰色）
│               │   │       ├── 文字显示：最多3行，超出显示"..."
│               │   │       ├── 行间距：1.4倍行高
│               │   │       └── 关键词高亮：重要信息蓝色高亮
│               │   ├── 🔻 底部操作区域（可选显示）
│               │   │   ├── 🎯「立即完善」按钮（主要操作按钮）
│               │   │   │   ├── 按钮样式：紫色背景 + 白色文字 + 圆角8px
│               │   │   │   ├── 按钮尺寸：100x32px + 左对齐显示
│               │   │   │   └── 点击功能：跳转到对应功能页面
│               │   │   └── 🔕「忽略」按钮（次要操作按钮）
│               │   │       ├── 按钮样式：灰色边框 + 灰色文字 + 圆角8px
│               │   │       ├── 按钮尺寸：60x32px + 右侧显示
│               │   │       └── 点击功能：标记为已读并隐藏
│               │   └── 点击区域：整个卡片可点击查看详情
│               │
│               └── 🔄 列表控制（相同的加载更多机制）
│
├── 【消息扩展功能页面群】📱（消息相关的扩展功能页面）
│   ├── 【私聊对话页面】📱（一对一聊天界面）
│   │   ├── 📱 系统状态栏（9:41时间 + 信号电池显示）
│   │   │
│   │   ├── 🔝 对话导航栏（固定头部 - 高度56px - 白色背景）
│   │   │   ├── 🔙「<」返回按钮（左上角 - 黑色箭头图标 24x24px）
│   │   │   ├── 📝 对话信息区域（居中显示）
│   │   │   │   ├── "用户昵称" 对话用户昵称（16sp黑色粗体）
│   │   │   │   └── 🟢 在线状态 "在线"（14sp绿色 - 昵称下方）
│   │   │   │       ├── 在线状态：绿色"在线"
│   │   │   │       ├── 离线状态：灰色"X分钟前在线"
│   │   │   │       └── 状态更新：实时更新机制
│   │   │   └── 📞 通话功能区域（右上角 - 可选显示）
│   │   │       ├── 📞「语音通话」按钮（电话图标 24x24px）
│   │   │       └── 🎥「视频通话」按钮（摄像头图标 24x24px）
│   │   │
│   │   ├── 📋 聊天消息区域（主要内容区域 - 可滚动）
│   │   │   ├── 📊 时间分隔线（消息分组显示）
│   │   │   │   ├── 分隔线样式：1px灰色线 + 时间标签
│   │   │   │   ├── 时间标签 "1分钟前"（居中 - 12sp灰色背景）
│   │   │   │   └── 时间间隔：超过5分钟显示时间分隔
│   │   │   │
│   │   │   └── 《消息列表容器》📋（垂直滚动消息流）
│   │   │       ├── 💬《接收消息气泡》📋（对方消息 - 左对齐）
│   │   │       │   ├── 👤 用户头像（左侧 - 圆形36x36px）
│   │   │       │   ├── 💬 消息气泡容器（浅灰色背景 + 圆角12px）
│   │   │       │   ├── 📝 消息内容（16sp黑色）
│   │   │       │   └── 🕐 消息时间戳（可选显示）
│   │   │       │
│   │   │       ├── 💬《发送消息气泡》📋（自己消息 - 右对齐）
│   │   │       │   ├── 💬 消息气泡容器（紫色背景 + 圆角12px）
│   │   │       │   ├── 📝 消息内容（16sp白色）
│   │   │       │   ├── ✅ 消息状态指示（发送中/已发送/已读/失败）
│   │   │       │   └── 👤 用户头像（右侧 - 自己头像）
│   │   │       │
│   │   │       ├── 🖼️《图片消息展示》📋（图片内容消息 - 居中显示）
│   │   │       │   ├── 📱 图片消息容器（无背景气泡 - 直接显示）
│   │   │       │   ├── 🖼️ 图片内容区域（主要显示区域）
│   │   │       │   │   ├── 📷 图片显示（最大宽度280px + 等比缩放）
│   │   │       │   │   │   ├── 图片样式：圆角12px + 1px浅灰边框
│   │   │       │   │   │   ├── 图片加载：占位图 + 渐进式加载
│   │   │       │   │   │   ├── 点击功能：查看大图 + 手势缩放
│   │   │       │   │   │   └── 长按功能：保存图片 + 转发 + 删除
│   │   │       │   │   └── 📝 图片配文（图片下方 - 可选显示）
│   │   │       │   │       ├── 配文内容："请你们看雪"（16sp黑色）
│   │   │       │   │       ├── 配文样式：居中显示 + 上边距8px
│   │   │       │   │       └── 配文功能：支持文字选择和复制
│   │   │       │   │
│   │   │       │   ├── 👤 发送用户信息（图片下方 - 左对齐）
│   │   │       │   │   ├── 🖼️ 用户头像（圆形24x24px - 小尺寸）
│   │   │       │   │   ├── 📝 用户昵称 "用户名称"（14sp黑色）
│   │   │       │   │   └── 💖 互动统计 "❤️ 88"（14sp红色 - 右对齐）
│   │   │       │   │       ├── 点赞数量：实时更新显示
│   │   │       │   │       ├── 点击功能：点赞/取消点赞
│   │   │       │   │       └── 动画效果：点赞时心形放大动画
│   │   │       │   │
│   │   │       │   └── 🕐 图片消息时间（底部 - 12sp灰色）
│   │   │       │
│   │   │       └── 🔄 消息加载控制
│   │   │
│   │   ├── 📝 消息输入区域（固定底部 - 高度60px + 安全区域）
│   │   │   ├── 🔧 功能扩展区域（拍照/相册按钮）
│   │   │   ├── 《消息输入框》📋（多行文本输入框）
│   │   │   │   ├── 输入框样式：白色背景 + 圆角20px + 1px灰色边框
│   │   │   │   ├── 自动扩展：最小40px + 最大120px高度
│   │   │   │   └── 🎤 语音输入按钮（输入框内右侧）
│   │   │   └── 📤「发送」按钮（紫色圆形背景 + 40x40px）
│   │   │
│   │   └── 📱 底部安全区域（iPhone适配 - 34px高度）
│   │
│   └── 【一键清除确认页面】📱（清除操作确认弹窗）
│       ├── 📱 半透明遮罩层（全屏遮罩 - 50%透明黑色）
│       │   ├── 遮罩样式：rgba(0,0,0,0.5)背景
│       │   └── 点击遮罩：关闭弹窗返回
│       │
│       └── 📋 确认对话框（居中弹窗 - 白色背景）
│           ├── 📱 对话框容器（280x160px + 圆角16px + 阴影4px）
│           ├── 🚨 警告图标区域（橙色感叹号 32x32px + 0.3s动画）
│           ├── 📝 确认信息区域
│           │   ├── 主要提示："确定清除所有的消息通知吗？"（16sp黑色粗体）
│           │   └── 次要提示："此操作不可恢复"（14sp灰色）
│           └── 🔻 按钮操作区域
│               ├── 🔘「取消」按钮（灰色边框 + 灰色文字）
│               └── 🗑️「确定清空」按钮（红色背景 + 白色文字）
│
└── 🔧 系统支持层
    ├── 消息推送服务（实时消息推送 + 离线消息存储）
    ├── 消息同步服务（多端消息同步 + 消息状态同步）
    ├── 消息存储服务（消息持久化 + 消息搜索索引）
    ├── 用户关系服务（关注关系 + 黑名单管理）
    ├── 内容审核服务（消息内容审核 + 敏感词过滤）
    └── 消息统计服务（消息数据统计 + 用户行为分析）
```

---

## 🔄 **流程图（用户操作视角）**

```
开始
 ↓
【进入消息系统】
 ├─→ 从底部导航进入消息Tab
 ├─→ 从通知推送点击进入
 └─→ 从其他页面跳转进入
 ↓
【消息主页面初始化】
 ↓
页面数据加载
 ├─→ 加载消息分类功能卡片
 ├─→ 加载最近对话列表
 ├─→ 加载未读消息数量
 └─→ 初始化实时消息监听
 ↓
用户操作选择
 ├─→ 浏览分类消息
 │    ↓
 │   【消息分类功能操作】
 │    ├─→ 点击"赞和收藏"卡片
 │    │    ↓
 │    │   【进入赞和收藏消息页面】
 │    │    ├─→ 页面数据初始化
 │    │    │    ├─→ 加载点赞消息列表
 │    │    │    ├─→ 加载收藏消息列表
 │    │    │    ├─→ 按时间排序显示
 │    │    │    └─→ 标记消息已读状态
 │    │    │
 │    │    ├─→ 浏览消息列表操作
 │    │    │    ├─→ 查看点赞消息
 │    │    │    │    ├─→ 查看点赞用户头像和昵称
 │    │    │    │    ├─→ 查看被点赞的内容预览
 │    │    │    │    ├─→ 查看点赞时间信息
 │    │    │    │    └─→ 点击跳转到原内容详情页
 │    │    │    │
 │    │    │    ├─→ 查看收藏消息
 │    │    │    │    ├─→ 查看收藏用户信息
 │    │    │    │    ├─→ 查看被收藏作品预览
 │    │    │    │    ├─→ 查看收藏时间信息
 │    │    │    │    └─→ 点击跳转到作品详情页
 │    │    │    │
 │    │    │    └─→ 消息互动操作
 │    │    │         ├─→ 点击用户头像 → 查看用户详情页
 │    │    │         ├─→ 点击内容缩略图 → 查看内容详情
 │    │    │         └─→ 长按消息项 → 显示操作菜单
 │    │    │
 │    │    ├─→ 消息管理操作
 │    │    │    ├─→ 点击清空按钮
 │    │    │    │    ├─→ 弹出确认对话框
 │    │    │    │    ├─→ 确认清空所有消息
 │    │    │    │    └─→ 清空完成并刷新页面
 │    │    │    │
 │    │    │    ├─→ 下拉刷新操作
 │    │    │    │    ├─→ 下拉触发刷新动画
 │    │    │    │    ├─→ 重新加载最新消息
 │    │    │    │    └─→ 更新消息列表显示
 │    │    │    │
 │    │    │    └─→ 上滑加载更多
 │    │    │         ├─→ 滑动到底部触发加载
 │    │    │         ├─→ 加载历史消息数据
 │    │    │         └─→ 追加到列表底部
 │    │    │
 │    │    └─→ 返回消息主页面
 │    │
 │    ├─→ 点击"评论"卡片
 │    │    ↓
 │    │   【进入评论消息页面】
 │    │    ├─→ 页面数据初始化
 │    │    │    ├─→ 加载评论消息列表
 │    │    │    ├─→ 按时间倒序排列
 │    │    │    ├─→ 标记未读评论为已读
 │    │    │    └─→ 更新评论数量角标
 │    │    │
 │    │    ├─→ 浏览评论消息操作
 │    │    │    ├─→ 查看评论用户信息
 │    │    │    │    ├─→ 查看评论者头像昵称
 │    │    │    │    ├─→ 查看评论时间信息
 │    │    │    │    └─→ 点击头像查看用户详情
 │    │    │    │
 │    │    │    ├─→ 查看评论内容
 │    │    │    │    ├─→ 查看评论文字内容
 │    │    │    │    ├─→ 查看被评论作品预览
 │    │    │    │    └─→ 点击查看完整评论详情
 │    │    │    │
 │    │    │    └─→ 评论互动操作
 │    │    │         ├─→ 点击评论消息项 → 进入评论详情页
 │    │    │         ├─→ 在详情页回复评论
 │    │    │         ├─→ 点赞评论内容
 │    │    │         └─→ 举报不当评论
 │    │    │
 │    │    ├─→ 评论管理操作
 │    │    │    ├─→ 批量管理评论
 │    │    │    │    ├─→ 长按进入多选模式
 │    │    │    │    ├─→ 选择多条评论消息
 │    │    │    │    └─→ 批量删除或标记已读
 │    │    │    │
 │    │    │    └─→ 清空所有评论消息
 │    │    │         ├─→ 点击清空按钮
 │    │    │         ├─→ 确认清空操作
 │    │    │         └─→ 清空完成并更新显示
 │    │    │
 │    │    └─→ 返回消息主页面
 │    │
 │    ├─→ 点击"粉丝"卡片
 │    │    ↓
 │    │   【进入粉丝消息页面】
 │    │    ├─→ 页面数据初始化
 │    │    │    ├─→ 加载新增粉丝列表
 │    │    │    ├─→ 加载粉丝用户信息
 │    │    │    ├─→ 检查互相关注状态
 │    │    │    └─→ 按关注时间排序
 │    │    │
 │    │    ├─→ 浏览粉丝消息操作
 │    │    │    ├─→ 查看新增粉丝信息
 │    │    │    │    ├─→ 查看粉丝头像昵称
 │    │    │    │    ├─→ 查看粉丝个性签名
 │    │    │    │    ├─→ 查看关注时间
 │    │    │    │    └─→ 点击头像查看用户详情
 │    │    │    │
 │    │    │    └─→ 粉丝关系管理
 │    │    │         ├─→ 查看当前关注状态
 │    │    │         │    ├─→ 未关注状态：显示"关注"按钮
 │    │    │         │    ├─→ 已关注状态：显示"已关注"按钮
 │    │    │         │    └─→ 互相关注：显示"互相关注"标识
 │    │    │         │
 │    │    │         ├─→ 关注操作处理
 │    │    │         │    ├─→ 点击"关注"按钮 → 发送关注请求
 │    │    │         │    ├─→ 关注成功 → 更新按钮状态为"已关注"
 │    │    │         │    ├─→ 点击"已关注" → 弹出取消关注确认
 │    │    │         │    └─→ 取消关注 → 更新按钮状态为"关注"
 │    │    │         │
 │    │    │         └─→ 粉丝互动操作
 │    │    │              ├─→ 私信粉丝 → 进入私聊页面
 │    │    │              ├─→ 查看粉丝作品 → 跳转用户主页
 │    │    │              └─→ 屏蔽粉丝 → 加入黑名单
 │    │    │
 │    │    ├─→ 粉丝管理操作
 │    │    │    ├─→ 批量关注操作
 │    │    │    │    ├─→ 进入批量管理模式
 │    │    │    │    ├─→ 选择多个粉丝用户
 │    │    │    │    └─→ 批量执行关注操作
 │    │    │    │
 │    │    │    └─→ 清空粉丝消息
 │    │    │         ├─→ 点击清空按钮
 │    │    │         ├─→ 确认清空操作
 │    │    │         └─→ 清空完成保留关注关系
 │    │    │
 │    │    └─→ 返回消息主页面
 │    │
 │    └─→ 点击"系统通知"卡片
 │         ↓
 │        【进入系统通知页面】
 │         ├─→ 页面数据初始化
 │         │    ├─→ 加载系统通知列表
 │         │    ├─→ 按优先级和时间排序
 │         │    ├─→ 区分通知类型和状态
 │         │    └─→ 标记通知为已读
 │         │
 │         ├─→ 浏览系统通知操作
 │         │    ├─→ 查看重要通知
 │         │    │    ├─→ 查看红色优先级标识
 │         │    │    ├─→ 查看通知标题和内容
 │         │    │    ├─→ 查看通知发送时间
 │         │    │    └─→ 点击查看通知详情
 │         │    │
 │         │    ├─→ 查看普通通知
 │         │    │    ├─→ 查看黄色/蓝色优先级标识
 │         │    │    ├─→ 查看通知基本信息
 │         │    │    └─→ 点击展开详细内容
 │         │    │
 │         │    └─→ 查看通知详细内容
 │         │         ├─→ 阅读完整通知文本
 │         │         ├─→ 查看关键词高亮信息
 │         │         └─→ 理解通知具体要求
 │         │
 │         ├─→ 处理系统通知操作
 │         │    ├─→ 主要操作按钮处理
 │         │    │    ├─→ 点击"立即完善" → 跳转到个人资料页面
 │         │    │    ├─→ 点击"查看详情" → 跳转到相关功能页面
 │         │    │    ├─→ 点击"立即处理" → 执行对应业务操作
 │         │    │    └─→ 操作完成 → 自动标记通知已处理
 │         │    │
 │         │    ├─→ 次要操作按钮处理
 │         │    │    ├─→ 点击"忽略" → 标记通知为已读并隐藏
 │         │    │    ├─→ 点击"稍后提醒" → 设置延迟提醒
 │         │    │    └─→ 点击"不再提醒" → 关闭此类通知
 │         │    │
 │         │    └─→ 通知状态管理
 │         │         ├─→ 已处理通知：显示完成标识
 │         │         ├─→ 已忽略通知：从列表中隐藏
 │         │         └─→ 过期通知：自动清理或归档
 │         │
 │         ├─→ 系统通知管理
 │         │    ├─→ 通知分类筛选
 │         │    │    ├─→ 按通知类型筛选显示
 │         │    │    ├─→ 按优先级筛选显示
 │         │    │    └─→ 按处理状态筛选显示
 │         │    │
 │         │    ├─→ 批量管理通知
 │         │    │    ├─→ 进入批量选择模式
 │         │    │    ├─→ 选择多条通知消息
 │         │    │    ├─→ 批量标记已读
 │         │    │    └─→ 批量删除通知
 │         │    │
 │         │    └─→ 清空系统通知
 │         │         ├─→ 点击清空按钮
 │         │         ├─→ 选择清空范围（已读/全部）
 │         │         ├─→ 确认清空操作
 │         │         └─→ 清空完成并更新显示
 │         │
 │         └─→ 返回消息主页面
 │
 ├─→ 【消息扩展功能操作】
 │    ↓
 │   【分享笔记功能流程】
 │    ├─→ 点击分享按钮或选择分享功能
 │    │    ↓
 │    │   【进入分享笔记页面】
 │    │    ├─→ 页面数据初始化
 │    │    │    ├─→ 加载用户笔记列表
 │    │    │    ├─→ 按创建时间排序显示
 │    │    │    ├─→ 初始化搜索功能
 │    │    │    └─→ 设置多选状态管理
 │    │    │
 │    │    ├─→ 搜索笔记操作
 │    │    │    ├─→ 点击搜索框开始输入
 │    │    │    ├─→ 实时搜索笔记标题和内容
 │    │    │    ├─→ 显示搜索结果列表
 │    │    │    └─→ 清空搜索返回全部笔记
 │    │    │
 │    │    ├─→ 选择笔记操作
 │    │    │    ├─→ 点击笔记项进行选择
 │    │    │    ├─→ 多选笔记管理
 │    │    │    └─→ 取消选择操作
 │    │    │
 │    │    ├─→ 发送笔记操作
 │    │    │    ├─→ 点击发送按钮
 │    │    │    ├─→ 确认发送操作
 │    │    │    └─→ 执行发送操作
 │    │    │
 │    │    └─→ 返回上一页面
 │    │
 │    └─→ 【一键清除功能流程】
 │         ↓
 │        点击清除/清空按钮
 │         ↓
 │        【触发清除确认流程】
 │         ├─→ 显示确认对话框
 │         │    ├─→ 弹出半透明遮罩层
 │         │    ├─→ 显示居中确认对话框
 │         │    ├─→ 显示警告图标和提示文字
 │         │    └─→ 显示取消/确定按钮
 │         │
 │         ├─→ 用户选择操作
 │         │    ├─→ 点击取消按钮 → 关闭对话框
 │         │    ├─→ 点击遮罩层 → 取消清除操作
 │         │    └─→ 点击确定清空按钮 → 执行清空
 │         │
 │         ├─→ 执行清空操作
 │         │    ├─→ 清空对话记录
 │         │    ├─→ 清空分类消息
 │         │    └─→ 清空完成处理
 │         │
 │         └─→ 返回更新后的页面
 │
 ├─→ 查看最近对话
 │    ↓
 │   【最近对话列表操作】
 │    ├─→ 浏览对话列表
 │    │    ├─→ 查看用户头像和昵称
 │    │    ├─→ 查看最后消息预览
 │    │    ├─→ 查看消息时间和未读状态
 │    │    └─→ 查看在线状态指示
 │    ├─→ 点击对话项进入聊天
 │    │    ↓
 │    │   【进入私聊对话页面】
 │    │    ├─→ 页面初始化
 │    │    │    ├─→ 加载历史聊天记录
 │    │    │    ├─→ 标记消息为已读状态
 │    │    │    ├─→ 显示对方在线状态
 │    │    │    ├─→ 初始化实时消息监听
 │    │    │    └─→ 滚动到最新消息位置
 │    │    │
 │    │    ├─→ 查看聊天历史
 │    │    │    ├─→ 浏览历史消息记录
 │    │    │    │    ├─→ 查看消息内容和时间
 │    │    │    │    ├─→ 查看消息发送状态
 │    │    │    │    └─→ 区分发送/接收消息
 │    │    │    │
 │    │    │    ├─→ 消息时间分组显示
 │    │    │    │    ├─→ 超过5分钟显示时间分隔
 │    │    │    │    └─→ 点击消息显示具体时间
 │    │    │    │
 │    │    │    └─→ 上滑加载更早消息
 │    │    │         ├─→ 滑动到顶部触发加载
 │    │    │         ├─→ 加载历史消息数据
 │    │    │         └─→ 插入到列表顶部
 │    │    │
 │    │    ├─→ 发送文字消息
 │    │    │    ├─→ 点击输入框开始输入
 │    │    │    │    ├─→ 输入框获得焦点
 │    │    │    │    ├─→ 键盘弹出并调整布局
 │    │    │    │    └─→ 发送按钮状态更新
 │    │    │    │
 │    │    │    ├─→ 输入消息内容
 │    │    │    │    ├─→ 实时监听输入状态
 │    │    │    │    ├─→ 自动扩展输入框高度
 │    │    │    │    ├─→ 字数统计和限制
 │    │    │    │    └─→ 表情和链接识别
 │    │    │    │
 │    │    │    ├─→ 点击发送按钮
 │    │    │    │    ├─→ 验证输入内容不为空
 │    │    │    │    ├─→ 创建消息对象
 │    │    │    │    ├─→ 显示发送中状态
 │    │    │    │    └─→ 清空输入框内容
 │    │    │    │
 │    │    │    └─→ 消息发送处理
 │    │    │         ├─→ 发送成功：显示单勾图标
 │    │    │         ├─→ 对方已读：显示双勾图标
 │    │    │         ├─→ 发送失败：显示重发按钮
 │    │    │         └─→ 滚动到最新消息位置
 │    │    │
 │    │    ├─→ 发送图片消息
 │    │    │    ├─→ 点击拍照按钮
 │    │    │    │    ├─→ 打开相机应用
 │    │    │    │    ├─→ 拍照并确认
 │    │    │    │    └─→ 返回聊天页面发送
 │    │    │    │
 │    │    │    ├─→ 点击相册按钮
 │    │    │    │    ├─→ 打开相册选择界面
 │    │    │    │    ├─→ 选择单张或多张图片
 │    │    │    │    └─→ 确认选择并返回
 │    │    │    │
 │    │    │    ├─→ 图片发送处理
 │    │    │    │    ├─→ 显示图片预览
 │    │    │    │    ├─→ 压缩和上传图片
 │    │    │    │    ├─→ 显示上传进度
 │    │    │    │    └─→ 发送图片消息
 │    │    │    │
 │    │    │    └─→ 图片消息显示
 │    │    │         ├─→ 显示图片缩略图
 │    │    │         ├─→ 点击查看大图
 │    │    │         ├─→ 长按保存图片
 │    │    │         └─→ 图片发送状态指示
 │    │    │
 │    │    ├─→ 语音输入功能（可选）
 │    │    │    ├─→ 点击语音按钮切换模式
 │    │    │    ├─→ 长按录制语音消息
 │    │    │    ├─→ 松开发送语音消息
 │    │    │    └─→ 语音消息播放和状态
 │    │    │
 │    │    ├─→ 消息互动操作
 │    │    │    ├─→ 长按消息显示操作菜单
 │    │    │    │    ├─→ 复制消息内容文字
 │    │    │    │    ├─→ 删除消息记录
 │    │    │    │    ├─→ 转发消息给其他用户
 │    │    │    │    └─→ 举报不当消息内容
 │    │    │    │
 │    │    │    ├─→ 点击用户头像
 │    │    │    │    └─→ 查看用户详情页面
 │    │    │    │
 │    │    │    └─→ 消息状态查看
 │    │    │         ├─→ 查看消息发送时间
 │    │    │         ├─→ 查看消息已读状态
 │    │    │         └─→ 重发失败消息
 │    │    │
 │    │    ├─→ 通话功能操作（可选）
 │    │    │    ├─→ 点击语音通话按钮
 │    │    │    │    ├─→ 发起语音通话请求
 │    │    │    │    ├─→ 等待对方接听
 │    │    │    │    └─→ 开始语音通话
 │    │    │    │
 │    │    │    └─→ 点击视频通话按钮
 │    │    │         ├─→ 发起视频通话请求
 │    │    │         ├─→ 等待对方接听
 │    │    │         └─→ 开始视频通话
 │    │    │
 │    │    └─→ 返回消息主页面
 │    │
 │    ├─→ 管理对话列表
 │    │    ├─→ 长按对话项显示操作菜单
 │    │    ├─→ 删除对话记录
 │    │    ├─→ 设置消息免打扰
 │    │    ├─→ 置顶重要对话
 │    │    └─→ 标记为已读/未读
 │    │
 │    └─→ 清空对话记录
 │         ├─→ 点击清空弹窗按钮
 │         ├─→ 确认清空所有对话
 │         └─→ 清除所有对话历史
 │
 ├─→ 消息设置功能
 │    ↓
 │   【消息设置页面】(可选功能)
 │    ├─→ 通知推送设置
 │    │    ├─→ 开启/关闭消息推送
 │    │    ├─→ 设置推送时间段
 │    │    ├─→ 选择推送消息类型
 │    │    └─→ 设置推送铃声和震动
 │    ├─→ 隐私设置
 │    │    ├─→ 设置谁可以给我发消息
 │    │    ├─→ 黑名单用户管理
 │    │    ├─→ 消息加密设置
 │    │    └─→ 在线状态显示设置
 │    ├─→ 消息存储设置
 │    │    ├─→ 消息自动清理周期
 │    │    ├─→ 图片自动下载设置
 │    │    ├─→ 消息云端备份
 │    │    └─→ 本地存储空间管理
 │    └─→ 返回消息主页面
 │
 └─→ 其他系统操作
      ↓
     【系统级消息处理】
      ├─→ 接收实时消息推送
      │    ├─→ 显示推送通知横幅
      │    ├─→ 更新未读消息数量
      │    ├─→ 播放消息提示音
      │    └─→ 更新对话列表排序
      ├─→ 处理消息同步
      │    ├─→ 多端消息状态同步
      │    ├─→ 离线消息拉取
      │    ├─→ 消息已读状态同步
      │    └─→ 消息删除状态同步
      └─→ 处理网络异常
           ├─→ 显示网络连接状态
           ├─→ 缓存未发送消息
           ├─→ 网络恢复后重发
           └─→ 显示消息发送失败状态
 ↓
【消息会话结束或继续其他操作】
 ├─→ 切换到其他Tab继续使用应用
 ├─→ 从消息跳转到用户详情或内容页面
 ├─→ 继续在当前对话中聊天
 └─→ 退出应用但保持消息推送监听
 ↓
【子页面操作汇聚点】- 所有分类消息子页面操作汇聚
 ↓
用户选择后续操作
 ├─→ 继续浏览其他分类消息
 ├─→ 返回消息主页面查看对话
 ├─→ 跳转到相关内容或用户页面
 └─→ 退出消息模块到其他Tab页面
 ↓
结束
```

---

## 🔄 **页面间流程图（页面跳转视角）**

### 📊 **页面跳转关系总览**

```
【消息模块页面间流程图】★★★
 
开始（应用启动）
 ↓
【外部入口】
 ├─→ 底部导航栏点击"消息"Tab
 ├─→ 推送通知点击进入
 ├─→ 其他页面跳转（用户详情、内容详情等）
 └─→ 深度链接直接进入
 ↓
┌─────────────────────────────────────────┐
│              【消息主页面】📱              │ ← 核心枢纽页面
│  ├─ 消息分类功能卡片区（4个入口）           │
│  ├─ 最近对话列表                        │
│  └─ 底部导航栏                          │
└─────────────────────────────────────────┘
 │
 ├─→【消息分类功能页面群】（从功能卡片进入）
 │   │
 │   ├─→ 点击"赞和收藏"卡片
 │   │    ↓
 │   │   ┌─────────────────────────────┐
 │   │   │    【赞和收藏消息页面】📱    │
 │   │   │  ├─ 导航栏（返回/标题/清空） │
 │   │   │  └─ 赞和收藏消息列表        │
 │   │   └─────────────────────────────┘
 │   │    │
 │   │    ├─→ 点击用户头像 → 【用户详情页面】（外部页面）
 │   │    ├─→ 点击内容缩略图 → 【内容详情页面】（外部页面）
 │   │    ├─→ 点击清空按钮 → 【一键清除确认页面】📱
 │   │    └─→ 点击返回按钮 → 回到【消息主页面】
 │   │
 │   ├─→ 点击"评论"卡片
 │   │    ↓
 │   │   ┌─────────────────────────────┐
 │   │   │      【评论消息页面】📱      │
 │   │   │  ├─ 导航栏（返回/标题/清空） │
 │   │   │  └─ 评论消息列表            │
 │   │   └─────────────────────────────┘
 │   │    │
 │   │    ├─→ 点击用户头像 → 【用户详情页面】（外部页面）
 │   │    ├─→ 点击评论内容 → 【评论详情页面】（外部页面）
 │   │    ├─→ 点击清空按钮 → 【一键清除确认页面】📱
 │   │    └─→ 点击返回按钮 → 回到【消息主页面】
 │   │
 │   ├─→ 点击"粉丝"卡片
 │   │    ↓
 │   │   ┌─────────────────────────────┐
 │   │   │       【粉丝消息页面】📱     │
 │   │   │  ├─ 导航栏（返回/标题/清空） │
 │   │   │  ├─ 粉丝消息列表            │
 │   │   │  └─ 关注状态管理按钮        │
 │   │   └─────────────────────────────┘
 │   │    │
 │   │    ├─→ 点击用户头像 → 【用户详情页面】（外部页面）
 │   │    ├─→ 点击关注按钮 → 发送关注请求（状态更新）
 │   │    ├─→ 点击清空按钮 → 【一键清除确认页面】📱
 │   │    └─→ 点击返回按钮 → 回到【消息主页面】
 │   │
 │   └─→ 点击"系统通知"卡片
 │        ↓
 │       ┌─────────────────────────────┐
 │       │     【系统通知页面】📱       │
 │       │  ├─ 导航栏（返回/标题/清空） │
 │       │  ├─ 系统通知列表            │
 │       │  └─ 处理操作按钮            │
 │       └─────────────────────────────┘
 │        │
 │        ├─→ 点击"立即完善" → 【个人资料页面】（外部页面）
 │        ├─→ 点击"查看详情" → 【相关功能页面】（外部页面）
 │        ├─→ 点击清空按钮 → 【一键清除确认页面】📱
 │        └─→ 点击返回按钮 → 回到【消息主页面】
 │
 ├─→【最近对话功能】（从对话列表进入）
 │   │
 │   ├─→ 点击对话项
 │   │    ↓
 │   │   ┌─────────────────────────────┐
 │   │   │      【私聊对话页面】📱      │
 │   │   │  ├─ 导航栏（返回/用户信息）  │
 │   │   │  ├─ 聊天消息区域            │
 │   │   │  └─ 消息输入区域            │
 │   │   └─────────────────────────────┘
 │   │    │
 │   │    ├─→ 点击用户头像/昵称 → 【用户详情页面】（外部页面）
 │   │    ├─→ 点击语音通话 → 【语音通话页面】（外部页面）
 │   │    ├─→ 点击视频通话 → 【视频通话页面】（外部页面）
 │   │    ├─→ 长按消息 → 消息操作菜单（转发/复制/删除）
 │   │    ├─→ 点击拍照按钮 → 【相机应用】（系统页面）
 │   │    ├─→ 点击相册按钮 → 【相册选择页面】（系统页面）
 │   │    └─→ 点击返回按钮 → 回到【消息主页面】
 │   │
 │   └─→ 长按对话项 → 对话管理菜单（删除/免打扰/置顶）
 │
 ├─→【消息扩展功能】（从主页面或其他功能触发）
 │   │
 │   └─→ 点击清空/清除按钮（任意页面）
 │        ↓
 │       ┌─────────────────────────────┐
 │       │   【一键清除确认页面】📱     │ ← 模态弹窗
 │       │  ├─ 半透明遮罩层            │
 │       │  ├─ 确认对话框              │
 │       │  └─ 取消/确定按钮           │
 │       └─────────────────────────────┘
 │        │
 │        ├─→ 点击取消/遮罩 → 关闭弹窗 → 回到原页面
 │        └─→ 点击确定清空 → 执行清空 → 回到原页面（已清空）
 │
 ├─→【消息设置功能】（从主页面设置图标进入）
 │   │
 │   └─→ 点击设置图标
 │        ↓
 │       ┌─────────────────────────────┐
 │       │     【消息设置页面】📱       │ ← 可选功能页面
 │       │  ├─ 导航栏（返回/标题）      │
 │       │  ├─ 通知推送设置            │
 │       │  ├─ 隐私设置                │
 │       │  └─ 消息存储设置            │
 │       └─────────────────────────────┘
 │        │
 │        └─→ 点击返回按钮 → 回到【消息主页面】
 │
 └─→【底部导航切换】
     │
     ├─→ 点击"首页"Tab → 【首页模块】（外部模块）
     ├─→ 点击"发现"Tab → 【发现模块】（外部模块）
     ├─→ 点击"消息"Tab → 保持在【消息主页面】
     └─→ 点击"我的"Tab → 【个人中心模块】（外部模块）
 ↓
结束（退出应用或切换到其他模块）
```

### 📋 **页面跳转关系矩阵**

```
┌─────────────────┬──────────────────────────────────────────────────────────┐
│    源页面        │                    目标页面                               │
├─────────────────┼──────────────────────────────────────────────────────────┤
│ 消息主页面       │ → 赞和收藏页面 → 评论页面 → 粉丝页面 → 系统通知页面        │
│                 │ → 私聊对话页面 → 消息设置页面                            │
│                 │ → 一键清除确认页面 → 其他Tab页面                         │
├─────────────────┼──────────────────────────────────────────────────────────┤
│ 赞和收藏页面     │ → 消息主页面（返回）→ 用户详情页面 → 内容详情页面          │
│                 │ → 一键清除确认页面                                       │
├─────────────────┼──────────────────────────────────────────────────────────┤
│ 评论页面         │ → 消息主页面（返回）→ 用户详情页面 → 评论详情页面          │
│                 │ → 一键清除确认页面                                       │
├─────────────────┼──────────────────────────────────────────────────────────┤
│ 粉丝页面         │ → 消息主页面（返回）→ 用户详情页面                        │
│                 │ → 一键清除确认页面                                       │
├─────────────────┼──────────────────────────────────────────────────────────┤
│ 系统通知页面     │ → 消息主页面（返回）→ 个人资料页面 → 相关功能页面          │
│                 │ → 一键清除确认页面                                       │
├─────────────────┼──────────────────────────────────────────────────────────┤
│ 私聊对话页面     │ → 消息主页面（返回）→ 用户详情页面 → 语音通话页面          │
│                 │ → 视频通话页面 → 相机应用 → 相册选择页面                  │
├─────────────────┼──────────────────────────────────────────────────────────┤
│ 消息设置页面     │ → 消息主页面（返回）                                     │
├─────────────────┼──────────────────────────────────────────────────────────┤
│ 一键清除确认页面 │ → 原页面（取消/确定后返回）                              │
└─────────────────┴──────────────────────────────────────────────────────────┘
```

### 🎯 **页面层级关系图**

```
【消息模块页面层级结构】

Level 0: 应用入口
    ├─ 底部导航栏
    ├─ 推送通知
    └─ 深度链接

Level 1: 核心枢纽页面
    └─ 【消息主页面】📱 ← 中心枢纽

Level 2: 主要功能页面
    ├─ 【赞和收藏页面】📱
    ├─ 【评论页面】📱
    ├─ 【粉丝页面】📱
    ├─ 【系统通知页面】📱
    ├─ 【私聊对话页面】📱
    └─ 【消息设置页面】📱

Level 3: 辅助功能页面
    └─ 【一键清除确认页面】📱 ← 模态弹窗

Level 4: 外部关联页面
    ├─ 【用户详情页面】（外部）
    ├─ 【内容详情页面】（外部）
    ├─ 【评论详情页面】（外部）
    ├─ 【个人资料页面】（外部）
    ├─ 【语音通话页面】（外部）
    ├─ 【视频通话页面】（外部）
    ├─ 【相机应用】（系统）
    └─ 【相册选择页面】（系统）
```

### 🔑 **关键跳转路径**

#### 🌟 **主要用户路径**
1. **消息查看路径**：消息主页面 → 分类消息页面 → 用户/内容详情页面
2. **私聊对话路径**：消息主页面 → 私聊对话页面 → 多媒体功能/图片互动
3. **消息管理路径**：任意页面 → 一键清除确认页面 → 原页面（已清空）
4. **图片消息路径**：私聊对话 → 发送图片 → 图片展示 → 点赞互动

#### 🔄 **返回路径规则**
- **统一返回**：所有子页面都可以通过返回按钮回到消息主页面
- **模态返回**：一键清除确认页面返回到触发页面
- **外部返回**：外部页面根据调用方式返回到相应页面

#### 🎯 **核心设计原则**
- **消息主页面作为中心枢纽**：所有功能页面都从主页面进入
- **统一的导航模式**：返回按钮 + 页面标题 + 功能按钮的标准布局
- **清晰的层级关系**：最多4层页面深度，避免用户迷失
- **一致的交互模式**：相同类型的操作使用相同的交互方式

---

## 🔌 **后端接口设计（API架构视角）**

### 🌳 **后端接口树状图结构**

```
【消息模块后端接口系统】★★★
│
├── 🔐【用户认证接口组】/api/auth/ ← 身份验证与会话管理
│   │
│   ├── POST /login → 用户登录验证 ⭐核心接口
│   │   ├─→ 📥 请求参数：
│   │   │   ├─→ phone/email: string ← 用户标识（手机号或邮箱）
│   │   │   ├─→ password: string ← 密码登录方式
│   │   │   ├─→ verification_code: string ← 验证码登录方式
│   │   │   ├─→ login_type: enum ← 登录类型（password/sms/email）
│   │   │   └─→ device_info: object ← 设备信息（型号/系统/版本）
│   │   │
│   │   ├─→ 📤 响应数据：
│   │   │   ├─→ access_token: string ← JWT访问令牌（2小时有效）
│   │   │   ├─→ refresh_token: string ← 刷新令牌（30天有效）
│   │   │   ├─→ user_info: object ← 用户基础信息
│   │   │   │   ├─→ user_id: string ← 用户唯一标识
│   │   │   │   ├─→ nickname: string ← 用户昵称
│   │   │   │   ├─→ avatar: string ← 头像URL
│   │   │   │   └─→ status: enum ← 账号状态（active/banned/frozen）
│   │   │   ├─→ permissions: array ← 权限列表
│   │   │   │   ├─→ message.send ← 发送消息权限
│   │   │   │   ├─→ message.receive ← 接收消息权限
│   │   │   │   └─→ notification.push ← 推送通知权限
│   │   │   └─→ login_time: timestamp ← 登录时间戳
│   │   │
│   │   └─→ 🔧 核心功能：
│   │       ├─→ JWT令牌生成 → 基于RSA256算法 + 用户ID + 权限信息
│   │       ├─→ 多端登录管理 → 支持最多5台设备同时在线
│   │       ├─→ 登录状态记录 → Redis存储 + 2小时过期时间
│   │       ├─→ 设备指纹识别 → 防止异常登录 + 安全提醒
│   │       └─→ 登录日志记录 → IP地址 + 设备信息 + 登录时间
│   │
│   ├── POST /refresh → 刷新访问令牌 🔄自动续期
│   │   ├─→ 📥 请求参数：
│   │   │   ├─→ refresh_token: string ← 有效的刷新令牌
│   │   │   └─→ device_id: string ← 设备唯一标识
│   │   │
│   │   ├─→ 📤 响应数据：
│   │   │   ├─→ new_access_token: string ← 新的访问令牌
│   │   │   ├─→ expire_time: timestamp ← 令牌过期时间
│   │   │   └─→ refresh_count: number ← 刷新次数统计
│   │   │
│   │   └─→ 🔧 核心功能：
│   │       ├─→ 令牌有效性验证 → 检查refresh_token是否过期/被撤销
│   │       ├─→ 设备绑定验证 → 确保令牌与设备匹配
│   │       ├─→ 自动续期机制 → 临近过期自动刷新
│   │       └─→ 安全检查 → 异常刷新频率检测
│   │
│   └── POST /logout → 用户登出 🚪安全退出
│       ├─→ 📥 请求参数：
│       │   ├─→ access_token: string ← 当前访问令牌
│       │   ├─→ logout_type: enum ← 登出类型（normal/force/all_devices）
│       │   └─→ device_id: string ← 设备标识
│       │
│       ├─→ 📤 响应数据：
│       │   ├─→ logout_status: boolean ← 登出成功状态
│       │   ├─→ affected_devices: number ← 影响的设备数量
│       │   └─→ logout_time: timestamp ← 登出时间戳
│       │
│       └─→ 🔧 核心功能：
│           ├─→ 令牌失效处理 → Redis删除令牌 + 黑名单添加
│           ├─→ 会话清理 → 清除用户会话数据 + WebSocket断开
│           ├─→ 多端登出支持 → 单设备/全设备登出选择
│           └─→ 登出日志记录 → 记录登出时间 + 原因
│
├── 💬【消息核心接口组】/api/messages/ ← 消息通信核心功能
│   │
│   ├── 📋【消息列表管理】← 对话列表与消息历史
│   │   │
│   │   ├── GET /conversations → 获取对话列表 📱消息主页面
│   │   │   ├─→ 📥 请求参数：
│   │   │   │   ├─→ page: number ← 页码（从1开始，默认1）
│   │   │   │   ├─→ limit: number ← 每页数量（默认20，最大100）
│   │   │   │   ├─→ type: enum ← 对话类型（all/private/group/system）
│   │   │   │   ├─→ status: enum ← 对话状态（active/archived/muted）
│   │   │   │   └─→ last_update: timestamp ← 增量更新时间戳
│   │   │   │
│   │   │   ├─→ 📤 响应数据：
│   │   │   │   ├─→ conversation_list: array ← 对话列表数组
│   │   │   │   │   ├─→ conversation_id: string ← 对话唯一标识
│   │   │   │   │   ├─→ conversation_type: enum ← private/group/system
│   │   │   │   │   ├─→ participants: array ← 参与者信息
│   │   │   │   │   │   ├─→ user_id: string ← 用户ID
│   │   │   │   │   │   ├─→ nickname: string ← 用户昵称
│   │   │   │   │   │   ├─→ avatar: string ← 头像URL
│   │   │   │   │   │   └─→ online_status: enum ← 在线状态（online/offline/away）
│   │   │   │   │   ├─→ last_message: object ← 最后一条消息
│   │   │   │   │   │   ├─→ message_id: string ← 消息ID
│   │   │   │   │   │   ├─→ content: string ← 消息内容预览
│   │   │   │   │   │   ├─→ message_type: enum ← text/image/audio/video
│   │   │   │   │   │   ├─→ sender_id: string ← 发送者ID
│   │   │   │   │   │   └─→ send_time: timestamp ← 发送时间
│   │   │   │   │   ├─→ unread_count: number ← 未读消息数量
│   │   │   │   │   ├─→ is_pinned: boolean ← 是否置顶
│   │   │   │   │   ├─→ is_muted: boolean ← 是否免打扰
│   │   │   │   │   └─→ update_time: timestamp ← 最后更新时间
│   │   │   │   ├─→ total: number ← 总对话数量
│   │   │   │   ├─→ unread_total: number ← 总未读数量
│   │   │   │   └─→ pagination: object ← 分页信息
│   │   │   │       ├─→ current_page: number ← 当前页码
│   │   │   │       ├─→ total_pages: number ← 总页数
│   │   │   │       └─→ has_more: boolean ← 是否有更多
│   │   │   │
│   │   │   └─→ 🔧 核心功能：
│   │   │       ├─→ 智能排序算法 → 置顶优先 + 未读优先 + 时间倒序
│   │   │       ├─→ 未读计数管理 → 实时更新 + Redis缓存 + 角标显示
│   │   │       ├─→ 在线状态同步 → WebSocket推送 + 心跳检测
│   │   │       ├─→ 消息预览生成 → 文字截取 + 多媒体标识 + 表情渲染
│   │   │       ├─→ 置顶管理 → 用户自定义置顶 + 最多10个置顶
│   │   │       └─→ 增量更新支持 → 基于时间戳的增量同步
│   │   │
│   │   ├── GET /conversations/{id}/messages → 获取对话消息历史 💬私聊对话页面
│   │   │   ├─→ 📥 请求参数：
│   │   │   │   ├─→ conversation_id: string ← 对话ID（路径参数）
│   │   │   │   ├─→ page: number ← 页码（默认1）
│   │   │   │   ├─→ limit: number ← 每页消息数（默认50）
│   │   │   │   ├─→ before_id: string ← 起始消息ID（向前分页）
│   │   │   │   ├─→ after_id: string ← 结束消息ID（向后分页）
│   │   │   │   └─→ message_types: array ← 消息类型过滤
│   │   │   │
│   │   │   ├─→ 📤 响应数据：
│   │   │   │   ├─→ message_list: array ← 消息列表
│   │   │   │   │   ├─→ message_id: string ← 消息唯一标识
│   │   │   │   │   ├─→ conversation_id: string ← 所属对话ID
│   │   │   │   │   ├─→ sender_id: string ← 发送者用户ID
│   │   │   │   │   ├─→ sender_info: object ← 发送者信息
│   │   │   │   │   │   ├─→ nickname: string ← 发送者昵称
│   │   │   │   │   │   ├─→ avatar: string ← 发送者头像
│   │   │   │   │   │   └─→ online_status: enum ← 在线状态
│   │   │   │   │   ├─→ message_type: enum ← 消息类型（text/image/audio/video/system）
│   │   │   │   │   ├─→ content: object ← 消息内容
│   │   │   │   │   │   ├─→ text: string ← 文字内容
│   │   │   │   │   │   ├─→ media_url: string ← 媒体文件URL
│   │   │   │   │   │   ├─→ thumbnail_url: string ← 缩略图URL
│   │   │   │   │   │   ├─→ file_size: number ← 文件大小（字节）
│   │   │   │   │   │   ├─→ duration: number ← 媒体时长（秒）
│   │   │   │   │   │   └─→ caption: string ← 媒体配文
│   │   │   │   │   ├─→ send_time: timestamp ← 发送时间戳
│   │   │   │   │   ├─→ message_status: enum ← 消息状态（sending/sent/delivered/read/failed）
│   │   │   │   │   ├─→ read_by: array ← 已读用户列表
│   │   │   │   │   ├─→ is_recalled: boolean ← 是否已撤回
│   │   │   │   │   ├─→ reply_to: object ← 回复的消息信息
│   │   │   │   │   └─→ reactions: array ← 消息反应（点赞等）
│   │   │   │   ├─→ has_more: boolean ← 是否有更多消息
│   │   │   │   ├─→ cursor: string ← 分页游标
│   │   │   │   └─→ total_count: number ← 消息总数
│   │   │   │
│   │   │   └─→ 🔧 核心功能：
│   │   │       ├─→ 时间分组显示 → 5分钟内消息合并 + 时间分隔线
│   │   │       ├─→ 消息状态管理 → 发送状态跟踪 + 已读回执
│   │   │       ├─→ 多媒体处理 → 图片压缩 + 视频缩略图 + 音频波形
│   │   │       ├─→ 撤回消息处理 → 2分钟内可撤回 + 撤回提示显示
│   │   │       ├─→ 引用回复支持 → 消息引用关联 + 跳转定位
│   │   │       └─→ 双向分页加载 → 向前/向后无限滚动加载
│   │   │
│   │   └── PUT /conversations/{id}/read → 标记对话已读 ✅消息状态管理
│   │       ├─→ 📥 请求参数：
│   │       │   ├─→ conversation_id: string ← 对话ID（路径参数）
│   │       │   ├─→ last_message_id: string ← 最后已读消息ID
│   │       │   └─→ read_all: boolean ← 是否标记全部已读
│   │       │
│   │       ├─→ 📤 响应数据：
│   │       │   ├─→ read_status: boolean ← 标记成功状态
│   │       │   ├─→ read_count: number ← 已读消息数量
│   │       │   ├─→ unread_count: number ← 剩余未读数量
│   │       │   └─→ update_time: timestamp ← 更新时间戳
│   │       │
│   │       └─→ 🔧 核心功能：
│   │           ├─→ 批量已读标记 → 指定消息之前全部标记已读
│   │           ├─→ 实时状态同步 → WebSocket推送已读状态给发送方
│   │           ├─→ 未读计数更新 → 更新Redis缓存 + 角标数量
│   │           └─→ 多端状态同步 → 同步到用户所有在线设备
│   │
│   ├── 📤【消息发送管理】← 消息发送与状态跟踪
│   │   │
│   │   ├── POST /conversations/{id}/messages → 发送消息 📤核心发送接口
│   │   │   ├─→ 📥 请求参数：
│   │   │   │   ├─→ conversation_id: string ← 对话ID（路径参数）
│   │   │   │   ├─→ message_type: enum ← 消息类型（text/image/audio/video/file）
│   │   │   │   ├─→ content: object ← 消息内容
│   │   │   │   │   ├─→ text: string ← 文字内容（最大5000字符）
│   │   │   │   │   ├─→ media_url: string ← 媒体文件URL（预上传）
│   │   │   │   │   ├─→ file_name: string ← 文件原始名称
│   │   │   │   │   ├─→ file_size: number ← 文件大小（字节）
│   │   │   │   │   ├─→ duration: number ← 媒体时长（秒）
│   │   │   │   │   └─→ caption: string ← 媒体配文
│   │   │   │   ├─→ reply_to_id: string ← 回复的消息ID（可选）
│   │   │   │   ├─→ client_id: string ← 客户端消息ID（去重用）
│   │   │   │   └─→ send_time: timestamp ← 客户端发送时间
│   │   │   │
│   │   │   ├─→ 📤 响应数据：
│   │   │   │   ├─→ message_id: string ← 服务端生成的消息ID
│   │   │   │   ├─→ conversation_id: string ← 对话ID
│   │   │   │   ├─→ server_time: timestamp ← 服务器接收时间
│   │   │   │   ├─→ delivery_status: enum ← 投递状态（sent/delivered/failed）
│   │   │   │   ├─→ sequence_id: number ← 消息序列号
│   │   │   │   └─→ estimated_delivery: timestamp ← 预计送达时间
│   │   │   │
│   │   │   └─→ 🔧 核心功能：
│   │   │       ├─→ 文字消息处理 → 敏感词过滤 + 表情解析 + 长度验证
│   │   │       ├─→ 图片消息处理 → 格式验证 + 尺寸检查 + 安全扫描
│   │   │       ├─→ 语音消息处理 → 格式转换 + 时长限制(60s) + 音质优化
│   │   │       ├─→ 视频消息处理 → 格式验证 + 时长限制(5分钟) + 缩略图生成
│   │   │       ├─→ 消息去重机制 → 基于client_id防止重复发送
│   │   │       ├─→ 消息序列管理 → 保证消息有序性 + 丢失检测
│   │   │       └─→ 实时推送触发 → WebSocket推送给接收方
│   │   │
│   │   ├── PUT /messages/{id}/recall → 撤回消息
│   │   │   ├─→ 参数：message_id + reason
│   │   │   ├─→ 返回：recall_status + timestamp
│   │   │   ├─→ 功能：消息撤回 + 时间限制 + 权限验证
│   │   │   └─→ 子功能：
│   │   │       ├─→ 时间限制 → 2分钟内可撤回限制
│   │   │       ├─→ 权限验证 → 只能撤回自己的消息
│   │   │       ├─→ 状态更新 → 实时推送撤回状态
│   │   │       └─→ 历史保留 → 服务端保留撤回记录
│   │   │
│   │   └── POST /messages/{id}/forward → 转发消息
│   │       ├─→ 参数：message_id + target_conversations + comment
│   │       ├─→ 返回：forward_results + success_count + fail_count
│   │       ├─→ 功能：消息转发 + 批量发送 + 权限检查
│   │       └─→ 子功能：
│   │           ├─→ 单个转发 → 转发给指定用户或群组
│   │           ├─→ 批量转发 → 同时转发给多个对话
│   │           ├─→ 添加备注 → 转发时添加个人备注
│   │           ├─→ 权限过滤 → 过滤无权限的目标对话
│   │           └─→ 状态跟踪 → 跟踪每个转发的发送状态
│   │
│   ├── 📁【文件上传管理】
│   │   ├── POST /upload/image → 上传图片
│   │   │   ├─→ 参数：file + compress_quality + max_size
│   │   │   ├─→ 返回：file_url + thumbnail_url + file_info
│   │   │   ├─→ 功能：图片上传 + 自动压缩 + 缩略图生成
│   │   │   └─→ 子功能：
│   │   │       ├─→ 格式验证 → 支持JPEG/PNG/GIF/WebP格式
│   │   │       ├─→ 尺寸处理 → 自动压缩大图 + 生成多尺寸
│   │   │       ├─→ 质量控制 → 根据网络环境调整压缩质量
│   │   │       ├─→ 安全扫描 → 图片内容安全检测
│   │   │       └─→ CDN分发 → 上传到CDN获得加速链接
│   │   │
│   │   ├── POST /upload/audio → 上传音频
│   │   │   ├─→ 参数：file + duration + format
│   │   │   ├─→ 返回：file_url + duration + waveform_data
│   │   │   ├─→ 功能：音频上传 + 格式转换 + 时长验证
│   │   │   └─→ 子功能：
│   │   │       ├─→ 格式转换 → 统一转换为AAC/MP3格式
│   │   │       ├─→ 时长限制 → 最长60秒语音消息限制
│   │   │       ├─→ 波形生成 → 生成音频波形数据用于UI显示
│   │   │       ├─→ 音质优化 → 降噪处理 + 音量标准化
│   │   │       └─→ 语音识别 → 可选的语音转文字功能
│   │   │
│   │   └── POST /upload/video → 上传视频
│   │       ├─→ 参数：file + max_duration + quality
│   │       ├─→ 返回：file_url + thumbnail_url + duration + size
│   │       ├─→ 功能：视频上传 + 缩略图生成 + 格式转换
│   │       └─→ 子功能：
│   │           ├─→ 格式支持 → 支持MP4/MOV/AVI主流格式
│   │           ├─→ 时长限制 → 最长5分钟视频限制
│   │           ├─→ 缩略图 → 自动截取第1秒作为封面
│   │           ├─→ 压缩处理 → 根据质量要求压缩视频
│   │           └─→ 分片上传 → 大文件分片上传支持断点续传
│   │
│   └── 🔔【实时通信管理】
│       ├── WebSocket /ws/messages → 实时消息推送
│       │   ├─→ 连接：token + user_id + device_info
│       │   ├─→ 推送：new_message + typing_status + online_status
│       │   ├─→ 功能：实时消息 + 状态同步 + 在线管理
│       │   └─→ 子功能：
│       │       ├─→ 消息推送 → 实时接收新消息通知
│       │       ├─→ 输入状态 → "对方正在输入..."状态同步
│       │       ├─→ 在线状态 → 用户在线/离线状态实时更新
│       │       ├─→ 已读回执 → 消息已读状态实时反馈
│       │       ├─→ 多端同步 → 多设备消息状态同步
│       │       ├─→ 心跳保持 → 定期心跳保持连接活跃
│       │       └─→ 断线重连 → 网络断开自动重连机制
│       │
│       ├── POST /typing/start → 开始输入状态
│       │   ├─→ 参数：conversation_id + user_id
│       │   ├─→ 返回：status + timestamp
│       │   └─→ 功能：输入状态开始 + 超时自动清除
│       │
│       └── POST /typing/stop → 停止输入状态
│           ├─→ 参数：conversation_id + user_id
│           ├─→ 返回：status + timestamp
│           └─→ 功能：输入状态停止 + 状态清除
│
├── 🔔【消息分类接口组】/api/notifications/
│   │
│   ├── 💖【赞和收藏消息】
│   │   ├── GET /likes → 获取点赞消息列表
│   │   │   ├─→ 参数：page + limit + type + status
│   │   │   ├─→ 返回：like_list + total + unread_count
│   │   │   ├─→ 功能：点赞消息分页 + 未读统计 + 内容关联
│   │   │   └─→ 子功能：
│   │   │       ├─→ 消息类型 → 作品点赞/评论点赞/动态点赞
│   │   │       ├─→ 用户信息 → 点赞用户头像/昵称/认证状态
│   │   │       ├─→ 内容预览 → 被点赞内容的标题/图片预览
│   │   │       ├─→ 时间排序 → 按点赞时间倒序排列
│   │   │       ├─→ 去重处理 → 同一用户多次点赞合并显示
│   │   │       └─→ 关联跳转 → 提供原内容链接用于跳转
│   │   │
│   │   ├── GET /favorites → 获取收藏消息列表
│   │   │   ├─→ 参数：page + limit + content_type
│   │   │   ├─→ 返回：favorite_list + total + unread_count
│   │   │   ├─→ 功能：收藏消息分页 + 内容分类 + 用户信息
│   │   │   └─→ 子功能：
│   │   │       ├─→ 内容分类 → 作品收藏/笔记收藏/动态收藏
│   │   │       ├─→ 收藏用户 → 收藏用户的详细信息展示
│   │   │       ├─→ 收藏时间 → 收藏操作的具体时间
│   │   │       ├─→ 内容状态 → 原内容是否仍然有效可访问
│   │   │       └─→ 批量操作 → 支持批量标记已读/删除
│   │   │
│   │   └── PUT /likes-favorites/read → 批量标记已读
│   │       ├─→ 参数：message_ids[] + mark_all
│   │       ├─→ 返回：success_count + updated_timestamp
│   │       └─→ 功能：批量已读标记 + 未读计数更新
│   │
│   ├── 💬【评论消息管理】
│   │   ├── GET /comments → 获取评论消息列表
│   │   │   ├─→ 参数：page + limit + content_type + status
│   │   │   ├─→ 返回：comment_list + total + unread_count
│   │   │   ├─→ 功能：评论消息分页 + 内容关联 + 回复层级
│   │   │   └─→ 子功能：
│   │   │       ├─→ 评论类型 → 直接评论/回复评论/提及评论
│   │   │       ├─→ 评论内容 → 评论文字内容 + 图片/表情
│   │   │       ├─→ 评论用户 → 评论用户信息 + 认证状态
│   │   │       ├─→ 原始内容 → 被评论的作品/动态信息
│   │   │       ├─→ 回复链条 → 如果是回复，显示原评论
│   │   │       ├─→ 评论时间 → 评论发布的具体时间
│   │   │       └─→ 互动统计 → 评论的点赞数/回复数
│   │   │
│   │   ├── POST /comments/{id}/reply → 回复评论
│   │   │   ├─→ 参数：comment_id + content + reply_to_user
│   │   │   ├─→ 返回：reply_id + timestamp + notification_sent
│   │   │   ├─→ 功能：评论回复 + 通知发送 + 内容验证
│   │   │   └─→ 子功能：
│   │   │       ├─→ 内容过滤 → 敏感词过滤 + 垃圾评论检测
│   │   │       ├─→ 用户提及 → @用户功能 + 提及通知
│   │   │       ├─→ 回复通知 → 向原评论用户发送回复通知
│   │   │       └─→ 层级控制 → 限制回复层级深度
│   │   │
│   │   └── DELETE /comments/{id} → 删除评论消息
│   │       ├─→ 参数：comment_id + reason
│   │       ├─→ 返回：delete_status + timestamp
│   │       └─→ 功能：评论删除 + 权限验证 + 关联清理
│   │
│   ├── 👥【粉丝关注消息】
│   │   ├── GET /followers → 获取粉丝消息列表
│   │   │   ├─→ 参数：page + limit + follow_type + time_range
│   │   │   ├─→ 返回：follower_list + total + unread_count
│   │   │   ├─→ 功能：关注消息分页 + 用户信息 + 关注状态
│   │   │   └─→ 子功能：
│   │   │       ├─→ 关注类型 → 新关注/取消关注/互相关注
│   │   │       ├─→ 用户信息 → 粉丝头像/昵称/简介/认证
│   │   │       ├─→ 关注时间 → 关注操作的具体时间
│   │   │       ├─→ 关注状态 → 当前的关注关系状态
│   │   │       ├─→ 用户统计 → 粉丝的关注数/粉丝数/作品数
│   │   │       ├─→ 共同关注 → 共同关注的用户数量
│   │   │       └─→ 推荐理由 → 系统推荐的关注理由
│   │   │
│   │   ├── POST /follow → 关注用户
│   │   │   ├─→ 参数：target_user_id + follow_source
│   │   │   ├─→ 返回：follow_status + relationship + timestamp
│   │   │   ├─→ 功能：关注操作 + 关系建立 + 通知发送
│   │   │   └─→ 子功能：
│   │   │       ├─→ 关注验证 → 检查是否已关注/是否被拉黑
│   │   │       ├─→ 隐私设置 → 检查对方的隐私设置
│   │   │       ├─→ 关注通知 → 向被关注用户发送通知
│   │   │       ├─→ 推荐更新 → 更新推荐算法的关注数据
│   │   │       └─→ 动态权限 → 获得查看对方动态的权限
│   │   │
│   │   ├── DELETE /follow/{user_id} → 取消关注
│   │   │   ├─→ 参数：target_user_id
│   │   │   ├─→ 返回：unfollow_status + timestamp
│   │   │   └─→ 功能：取消关注 + 关系解除 + 权限回收
│   │   │
│   │   └── GET /follow-status/{user_id} → 获取关注状态
│   │       ├─→ 参数：target_user_id
│   │       ├─→ 返回：follow_status + mutual_follow + block_status
│   │       └─→ 功能：关注关系查询 + 状态判断
│   │
│   └── 🔔【系统通知管理】
│       ├── GET /system → 获取系统通知列表
│       │   ├─→ 参数：page + limit + priority + category + status
│       │   ├─→ 返回：notification_list + total + unread_count
│       │   ├─→ 功能：系统通知分页 + 分类筛选 + 优先级排序
│       │   └─→ 子功能：
│       │       ├─→ 通知分类 → 系统公告/功能更新/安全提醒/活动通知
│       │       ├─→ 优先级标识 → 紧急/重要/普通/一般四级优先级
│       │       ├─→ 通知内容 → 标题/正文/操作按钮/相关链接
│       │       ├─→ 发送时间 → 通知发送的具体时间
│       │       ├─→ 过期时间 → 通知的有效期/过期自动隐藏
│       │       ├─→ 目标用户 → 全员通知/特定用户群体/个人通知
│       │       ├─→ 操作按钮 → 立即处理/查看详情/忽略/关闭
│       │       └─→ 阅读统计 → 通知的阅读率/操作率统计
│       │
│       ├── PUT /system/{id}/read → 标记系统通知已读
│       │   ├─→ 参数：notification_id
│       │   ├─→ 返回：read_status + timestamp
│       │   └─→ 功能：通知已读标记 + 统计更新
│       │
│       ├── POST /system/{id}/action → 执行通知操作
│       │   ├─→ 参数：notification_id + action_type + action_data
│       │   ├─→ 返回：action_result + redirect_url + updated_status
│       │   ├─→ 功能：通知操作执行 + 页面跳转 + 状态更新
│       │   └─→ 子功能：
│       │       ├─→ 立即完善 → 跳转到个人资料完善页面
│       │       ├─→ 查看详情 → 跳转到相关功能详情页面
│       │       ├─→ 参与活动 → 跳转到活动页面
│       │       ├─→ 升级功能 → 跳转到功能升级页面
│       │       └─→ 安全验证 → 跳转到安全设置页面
│       │
│       └── DELETE /system/clear → 清空系统通知
│           ├─→ 参数：clear_type + before_date
│           ├─→ 返回：cleared_count + timestamp
│           └─→ 功能：批量清空 + 选择性删除 + 计数更新
│
├── 👤【用户关系接口组】/api/users/
│   ├── GET /{id}/profile → 获取用户详情
│   │   ├─→ 参数：user_id + fields + relation_info
│   │   ├─→ 返回：user_profile + relation_status + privacy_settings
│   │   ├─→ 功能：用户信息获取 + 关系状态 + 隐私控制
│   │   └─→ 子功能：
│   │       ├─→ 基础信息 → 头像/昵称/简介/认证状态
│   │       ├─→ 统计信息 → 关注数/粉丝数/作品数/获赞数
│   │       ├─→ 关系状态 → 关注/被关注/互相关注/拉黑状态
│   │       ├─→ 隐私设置 → 根据隐私设置控制信息可见性
│   │       ├─→ 在线状态 → 用户当前在线状态/最后活跃时间
│   │       └─→ 共同关注 → 共同关注的用户列表
│   │
│   ├── GET /search → 搜索用户
│   │   ├─→ 参数：keyword + page + limit + filters
│   │   ├─→ 返回：user_list + total + search_suggestions
│   │   └─→ 功能：用户搜索 + 智能提示 + 结果排序
│   │
│   ├── POST /block → 拉黑用户
│   │   ├─→ 参数：target_user_id + reason
│   │   ├─→ 返回：block_status + timestamp
│   │   └─→ 功能：用户拉黑 + 关系断开 + 消息屏蔽
│   │
│   └── DELETE /block/{user_id} → 取消拉黑
│       ├─→ 参数：target_user_id
│       ├─→ 返回：unblock_status + timestamp
│       └─→ 功能：取消拉黑 + 恢复正常交互
│
├── 📋【内容管理接口组】/api/content/
│   ├── GET /posts/{id} → 获取内容详情
│   │   ├─→ 参数：post_id + include_comments + include_stats
│   │   ├─→ 返回：post_detail + author_info + interaction_stats
│   │   └─→ 功能：内容详情获取 + 作者信息 + 互动数据
│   │
│   ├── GET /notes → 获取用户笔记列表
│   │   ├─→ 参数：user_id + page + limit + category
│   │   ├─→ 返回：note_list + total + categories
│   │   ├─→ 功能：笔记列表分页 + 分类筛选 + 搜索支持
│   │   └─→ 子功能：
│   │       ├─→ 笔记搜索 → 按标题/内容关键词搜索
│   │       ├─→ 分类筛选 → 按笔记分类/标签筛选
│   │       ├─→ 时间排序 → 按创建/修改时间排序
│   │       ├─→ 权限控制 → 根据隐私设置控制可见性
│   │       └─→ 预览内容 → 笔记标题/摘要/封面图
│   │
│   └── POST /share → 分享内容
│       ├─→ 参数：content_ids[] + target_conversations[] + comment
│       ├─→ 返回：share_results + success_count + fail_count
│       └─→ 功能：内容分享 + 批量发送 + 分享统计
│
├── ⚙️【系统配置接口组】/api/settings/
│   ├── GET /message → 获取消息设置
│   │   ├─→ 参数：user_id
│   │   ├─→ 返回：notification_settings + privacy_settings + filter_settings
│   │   └─→ 功能：消息设置获取 + 个人偏好 + 隐私控制
│   │
│   ├── PUT /message → 更新消息设置
│   │   ├─→ 参数：notification_config + privacy_config + filter_config
│   │   ├─→ 返回：update_status + effective_time
│   │   ├─→ 功能：设置更新 + 即时生效 + 同步推送
│   │   └─→ 子功能：
│   │       ├─→ 推送设置 → 消息推送开关/时间段/类型过滤
│   │       ├─→ 隐私设置 → 谁可以给我发消息/添加我为好友
│   │       ├─→ 免打扰 → 免打扰模式/时间段/特殊联系人
│   │       ├─→ 消息过滤 → 垃圾消息过滤/关键词屏蔽
│   │       └─→ 存储设置 → 消息保存时长/自动清理设置
│   │
│   └── POST /clear-data → 清空数据
│       ├─→ 参数：data_type + confirm_password + clear_scope
│       ├─→ 返回：clear_result + affected_count + timestamp
│       └─→ 功能：数据清空 + 安全验证 + 不可恢复提醒
│
├── 📊【数据统计接口组】/api/analytics/
│   ├── GET /message-stats → 消息统计数据
│   │   ├─→ 参数：time_range + stat_type + group_by
│   │   ├─→ 返回：message_stats + trend_data + comparison
│   │   └─→ 功能：消息数据统计 + 趋势分析 + 对比报告
│   │
│   └── GET /user-activity → 用户活跃度统计
│       ├─→ 参数：user_id + time_range + activity_type
│       ├─→ 返回：activity_stats + engagement_score + recommendations
│       └─→ 功能：活跃度统计 + 参与度评分 + 个性化推荐
│
└── 🔒【安全审核接口组】/api/security/
    ├── POST /content/review → 内容审核
    │   ├─→ 参数：content + content_type + user_id
    │   ├─→ 返回：review_result + risk_level + suggestions
    │   ├─→ 功能：内容安全审核 + 风险评估 + 处理建议
    │   └─→ 子功能：
    │       ├─→ 敏感词检测 → 政治敏感/色情/暴力/广告词汇
    │       ├─→ 图片识别 → 不当图片/二维码/文字识别
    │       ├─→ 语音识别 → 语音转文字后进行内容审核
    │       ├─→ 行为分析 → 用户行为模式/异常操作检测
    │       └─→ 机器学习 → AI模型辅助审核/持续优化
    │
    ├── POST /report → 举报内容
    │   ├─→ 参数：target_id + target_type + reason + evidence
    │   ├─→ 返回：report_id + status + estimated_process_time
    │   └─→ 功能：用户举报 + 证据收集 + 处理流程
    │
    └── GET /blacklist → 获取黑名单
        ├─→ 参数：list_type + page + limit
        ├─→ 返回：blacklist_items + total + update_time
        └─→ 功能：黑名单管理 + 自动过滤 + 定期更新
```

### 📊 **接口分组统计**

```
【消息模块后端接口架构统计】★★★

🔐 用户认证接口组 /api/auth/
├── POST /login (用户登录验证) ⭐核心接口
├── POST /refresh (刷新访问令牌) 🔄自动续期  
└── POST /logout (用户登出) 🚪安全退出
📊 小计：3个认证管理接口

💬 消息核心接口组 /api/messages/
├── 📋 消息列表管理
│   ├── GET /conversations (获取对话列表) 📱消息主页面
│   ├── GET /conversations/{id}/messages (获取消息历史) 💬私聊页面
│   └── PUT /conversations/{id}/read (标记已读) ✅状态管理
├── 📤 消息发送管理  
│   ├── POST /conversations/{id}/messages (发送消息) 📤核心发送
│   ├── PUT /messages/{id}/recall (撤回消息) ↩️消息撤回
│   └── POST /messages/{id}/forward (转发消息) 📢消息转发
├── 📁 文件上传管理
│   ├── POST /upload/image (图片上传) 🖼️图片处理
│   ├── POST /upload/audio (音频上传) 🎵音频处理
│   └── POST /upload/video (视频上传) 🎬视频处理
└── 🔔 实时通信管理
    ├── WebSocket /ws/messages (实时消息推送) ⚡实时通信
    ├── POST /typing/start (开始输入状态) ⌨️输入状态
    └── POST /typing/stop (停止输入状态) ⏹️状态清除
📊 小计：12个消息核心接口 + 1个WebSocket连接

🔔 消息分类接口组 /api/notifications/
├── 💖 赞和收藏消息 (3个接口) 📱赞收藏页面
├── 💬 评论消息管理 (3个接口) 📱评论页面  
├── 👥 粉丝关注消息 (4个接口) 📱粉丝页面
└── 🔔 系统通知管理 (4个接口) 📱系统通知页面
📊 小计：14个分类消息接口

👤 用户关系接口组 /api/users/
├── GET /{id}/profile (获取用户详情) 👤用户信息
├── GET /search (搜索用户) 🔍用户搜索
├── POST /block (拉黑用户) 🚫用户拉黑
└── DELETE /block/{user_id} (取消拉黑) ✅取消拉黑
📊 小计：4个用户关系接口

📋 内容管理接口组 /api/content/
├── GET /posts/{id} (获取内容详情) 📄内容详情
├── GET /notes (获取笔记列表) 📝笔记管理
└── POST /share (分享内容) 📤内容分享
📊 小计：3个内容管理接口

⚙️ 系统配置接口组 /api/settings/
├── GET /message (获取消息设置) ⚙️设置获取
├── PUT /message (更新消息设置) 🔧设置更新
└── POST /clear-data (清空数据) 🗑️数据清理
📊 小计：3个系统配置接口

📊 数据统计接口组 /api/analytics/
├── GET /message-stats (消息统计数据) 📈消息统计
└── GET /user-activity (用户活跃度统计) 📊用户统计
📊 小计：2个数据统计接口

🔒 安全审核接口组 /api/security/
├── POST /content/review (内容审核) 🛡️内容安全
├── POST /report (举报内容) 🚨用户举报
└── GET /blacklist (获取黑名单) 🚫黑名单管理
📊 小计：3个安全审核接口

【总计统计】
REST API接口：44个
WebSocket连接：1个
接口总数：45个后端接口

【前端页面映射】
📱 消息主页面 ← 7个核心接口
💬 私聊对话页面 ← 8个通信接口  
📱 消息分类页面 ← 14个分类接口
👤 用户详情页面 ← 4个用户接口
⚙️ 系统设置页面 ← 3个配置接口
```

### 🔑 **核心接口调用关系**

```
【前端页面 → 后端接口映射】

消息主页面：
├─→ GET /api/messages/conversations （对话列表）
├─→ GET /api/notifications/likes （赞和收藏计数）
├─→ GET /api/notifications/comments （评论计数）
├─→ GET /api/notifications/followers （粉丝计数）
├─→ GET /api/notifications/system （系统通知计数）
└─→ WebSocket /ws/messages （实时消息推送）

私聊对话页面：
├─→ GET /api/messages/conversations/{id}/messages （历史消息）
├─→ POST /api/messages/conversations/{id}/messages （发送消息）
├─→ PUT /api/messages/conversations/{id}/read （标记已读）
├─→ POST /api/upload/image （图片上传）
├─→ POST /api/upload/audio （语音上传）
├─→ POST /api/upload/video （视频上传）
├─→ POST /api/typing/start （开始输入）
├─→ POST /api/typing/stop （停止输入）
└─→ WebSocket /ws/messages （实时通信）

分类消息页面：
├─→ GET /api/notifications/likes （赞和收藏列表）
├─→ GET /api/notifications/comments （评论列表）
├─→ GET /api/notifications/followers （粉丝列表）
├─→ GET /api/notifications/system （系统通知列表）
├─→ PUT /api/notifications/*/read （批量标记已读）
└─→ DELETE /api/notifications/*/clear （清空消息）

图片消息功能：
├─→ POST /api/upload/image （图片上传）
├─→ POST /api/messages/conversations/{id}/messages （发送图片消息）
├─→ POST /api/content/like （点赞图片）
└─→ DELETE /api/content/like/{id} （取消点赞）

用户详情页面：
├─→ GET /api/users/{id}/profile （用户信息）
├─→ POST /api/notifications/follow （关注用户）
├─→ DELETE /api/notifications/follow/{id} （取消关注）
├─→ GET /api/notifications/follow-status/{id} （关注状态）
├─→ POST /api/users/block （拉黑用户）
└─→ DELETE /api/users/block/{id} （取消拉黑）
```

---

## 🔗 **模块间页面关系（跨模块集成视角）**

### 🌐 **模块间页面跳转关系图**

```
【消息模块 ↔ 其他模块页面关系图】★★★

🏠【首页模块】/home/
│
├─→ 🔗 进入消息模块的入口点
│   ├─→ 底部导航栏「消息」Tab → 【消息主页面】
│   ├─→ 首页推荐用户卡片「私信」按钮 → 【私聊对话页面】
│   ├─→ 首页动态「评论」按钮 → 【私聊对话页面】(评论转私信)
│   ├─→ 首页服务预约「联系TA」按钮 → 【私聊对话页面】
│   └─→ 首页搜索结果用户「发消息」 → 【私聊对话页面】
│
├─→ 📤 从消息模块返回的数据流
│   ├─→ 消息未读数量 → 首页底部导航红点角标
│   ├─→ 用户在线状态 → 首页用户卡片在线指示
│   ├─→ 最近联系人 → 首页「最近聊天」推荐区域
│   └─→ 消息推送触发 → 首页推送通知显示

💬【消息模块】/messages/ ← 核心模块
│
├─→ 📱 内部页面跳转关系
│   ├─→ 消息主页面 ↔ 4个分类消息页面
│   ├─→ 消息主页面 ↔ 私聊对话页面
│   ├─→ 任意页面 ↔ 一键清除确认页面（模态）
│   └─→ 消息主页面 ↔ 消息设置页面
│
├─→ 🔗 跳转到其他模块的出口点
│   ├─→ 点击用户头像/昵称 → 【个人中心模块】用户详情页
│   ├─→ 点击内容缩略图 → 【发现模块】内容详情页
│   ├─→ 点击评论消息 → 【发现模块】评论详情页
│   ├─→ 系统通知「完善资料」 → 【个人中心模块】编辑资料页
│   ├─→ 系统通知「查看详情」 → 【首页模块】相关功能页
│   ├─→ 私聊对话「语音通话」 → 【通话模块】语音通话页
│   ├─→ 私聊对话「视频通话」 → 【通话模块】视频通话页
│   ├─→ 私聊对话「拍照」 → 【系统相机】拍照功能
│   ├─→ 私聊对话「相册」 → 【系统相册】图片选择
│   └─→ 底部导航切换 → 【首页/发现/我的模块】
│
└─→ 📥 接收其他模块的数据输入
    ├─→ 用户关注/取消关注 → 更新粉丝消息列表
    ├─→ 内容点赞/收藏 → 更新赞和收藏消息
    ├─→ 内容评论/回复 → 更新评论消息列表
    ├─→ 系统功能更新 → 新增系统通知消息
    └─→ 用户状态变化 → 更新在线状态显示

🔍【发现模块】/discover/
│
├─→ 🔗 进入消息模块的入口点
│   ├─→ 发现页动态「评论」按钮 → 【评论消息页面】
│   ├─→ 发现页动态「点赞」按钮 → 【赞和收藏页面】
│   ├─→ 发现页用户「关注」按钮 → 【粉丝消息页面】
│   ├─→ 发现页内容「私信」按钮 → 【私聊对话页面】
│   └─→ 发现页举报功能 → 【系统通知页面】(举报处理结果)
│
├─→ 📤 从消息模块返回的数据流
│   ├─→ 评论消息数量 → 发现页内容评论数显示
│   ├─→ 点赞消息数量 → 发现页内容点赞数显示
│   ├─→ 用户关注状态 → 发现页用户关注按钮状态
│   └─→ 私信权限状态 → 发现页私信按钮可用性

👤【个人中心模块】/profile/
│
├─→ 🔗 进入消息模块的入口点
│   ├─→ 我的页面「消息中心」入口 → 【消息主页面】
│   ├─→ 个人资料「私信」按钮 → 【私聊对话页面】
│   ├─→ 粉丝列表「发消息」按钮 → 【私聊对话页面】
│   ├─→ 关注列表「发消息」按钮 → 【私聊对话页面】
│   └─→ 设置页面「消息设置」 → 【消息设置页面】
│
├─→ 📤 从消息模块返回的数据流
│   ├─→ 未读消息总数 → 我的页面消息中心红点
│   ├─→ 最近联系人 → 个人页面社交统计
│   ├─→ 消息设置状态 → 设置页面开关状态
│   └─→ 用户互动数据 → 个人页面互动统计

🔔【通知推送模块】/notifications/
│
├─→ 🔗 与消息模块的双向集成
│   ├─→ 系统推送点击 → 【消息主页面】或具体消息页
│   ├─→ 消息推送点击 → 【私聊对话页面】
│   ├─→ 评论推送点击 → 【评论消息页面】
│   ├─→ 点赞推送点击 → 【赞和收藏页面】
│   └─→ 关注推送点击 → 【粉丝消息页面】
│
└─→ 📡 推送消息生成来源
    ├─→ 新消息接收 → 生成消息推送通知
    ├─→ 新评论接收 → 生成评论推送通知
    ├─→ 新点赞接收 → 生成点赞推送通知
    ├─→ 新关注接收 → 生成关注推送通知
    └─→ 系统通知 → 生成系统推送通知
```

### 📊 **跨模块数据流转关系**

```
【模块间数据流转图】★★★

📊 数据输入流（其他模块 → 消息模块）
│
├── 🏠 首页模块输入
│   ├─→ 用户搜索结果 → 私聊对话页面用户信息
│   ├─→ 服务预约信息 → 私聊对话页面预约消息
│   ├─→ 推荐用户数据 → 私聊对话页面用户推荐
│   └─→ 在线状态更新 → 消息列表在线状态同步
│
├── 🔍 发现模块输入
│   ├─→ 内容点赞操作 → 赞和收藏消息页面新增记录
│   ├─→ 内容收藏操作 → 赞和收藏消息页面新增记录
│   ├─→ 内容评论操作 → 评论消息页面新增记录
│   ├─→ 用户关注操作 → 粉丝消息页面新增记录
│   ├─→ 内容举报结果 → 系统通知页面新增记录
│   └─→ 话题参与数据 → 系统通知页面活动通知
│
├── 👤 个人中心模块输入
│   ├─→ 资料完善状态 → 系统通知页面完善提醒
│   ├─→ 隐私设置变更 → 消息设置页面同步更新
│   ├─→ 黑名单管理 → 消息权限控制更新
│   ├─→ 认证状态变更 → 系统通知页面认证通知
│   └─→ 用户状态变更 → 消息列表用户信息更新
│
└── 🔔 系统管理输入
    ├─→ 系统公告发布 → 系统通知页面新增公告
    ├─→ 功能更新通知 → 系统通知页面更新提醒
    ├─→ 安全提醒通知 → 系统通知页面安全警告
    ├─→ 活动通知发布 → 系统通知页面活动消息
    └─→ 违规处理结果 → 系统通知页面处理通知

📤 数据输出流（消息模块 → 其他模块）
│
├── 🏠 向首页模块输出
│   ├─→ 未读消息总数 → 首页底部导航角标数量
│   ├─→ 最近联系人列表 → 首页推荐联系人区域
│   ├─→ 用户在线状态 → 首页用户卡片状态指示
│   ├─→ 消息活跃度 → 首页用户活跃度评分
│   └─→ 社交关系数据 → 首页个性化推荐算法
│
├── 🔍 向发现模块输出
│   ├─→ 用户互动历史 → 发现页内容推荐算法
│   ├─→ 关注关系数据 → 发现页用户推荐
│   ├─→ 消息偏好数据 → 发现页内容筛选
│   ├─→ 社交网络数据 → 发现页社交推荐
│   └─→ 互动频率数据 → 发现页排序权重
│
├── 👤 向个人中心模块输出
│   ├─→ 消息统计数据 → 个人页面数据统计
│   ├─→ 社交活跃度 → 个人页面活跃指标
│   ├─→ 关系网络数据 → 个人页面社交图谱
│   ├─→ 互动质量评分 → 个人页面信誉评分
│   └─→ 消息设置状态 → 设置页面配置同步
│
└── 🔔 向推送模块输出
    ├─→ 消息推送请求 → 实时消息推送触发
    ├─→ 推送偏好设置 → 推送策略个性化配置
    ├─→ 免打扰时段 → 推送时间控制
    ├─→ 推送优先级 → 推送重要性分级
    └─→ 推送统计反馈 → 推送效果分析数据
```

### 🎯 **深度链接与页面传参机制**

```
【深度链接路由设计】★★★

🔗 消息模块深度链接规范
│
├── 📱 主要页面路由
│   ├── /messages → 消息主页面（默认路由）
│   ├── /messages/conversations/{id} → 私聊对话页面
│   ├── /messages/likes → 赞和收藏消息页面
│   ├── /messages/comments → 评论消息页面
│   ├── /messages/followers → 粉丝消息页面
│   ├── /messages/notifications → 系统通知页面
│   └── /messages/settings → 消息设置页面
│
├── 📥 外部模块跳转参数
│   ├── 从首页跳转私聊
│   │   ├─→ /messages/conversations/new?user_id={id}&source=home_recommend
│   │   ├─→ /messages/conversations/new?user_id={id}&source=home_search
│   │   └─→ /messages/conversations/new?user_id={id}&source=service_contact
│   │
│   ├── 从发现页跳转
│   │   ├─→ /messages/conversations/new?user_id={id}&source=discover_profile
│   │   ├─→ /messages/comments?content_id={id}&source=discover_comment
│   │   └─→ /messages/likes?content_id={id}&source=discover_like
│   │
│   ├── 从个人中心跳转
│   │   ├─→ /messages/conversations/new?user_id={id}&source=profile_contact
│   │   ├─→ /messages/followers?user_id={id}&source=profile_fans
│   │   └─→ /messages/settings?source=profile_settings
│   │
│   └── 从推送通知跳转
│       ├─→ /messages/conversations/{id}?source=push_message&message_id={mid}
│       ├─→ /messages/comments?source=push_comment&comment_id={cid}
│       ├─→ /messages/likes?source=push_like&like_id={lid}
│       ├─→ /messages/followers?source=push_follow&follow_id={fid}
│       └─→ /messages/notifications?source=push_system&notification_id={nid}

📤 页面传参数据结构
│
├── 🎯 跳转到其他模块的参数
│   ├── 跳转用户详情页
│   │   ├─→ user_id: string ← 用户唯一标识
│   │   ├─→ source: enum ← 来源页面（messages_main/chat_page/fans_page）
│   │   ├─→ relation_type: enum ← 关系类型（follower/following/stranger）
│   │   └─→ last_interaction: timestamp ← 最后互动时间
│   │
│   ├── 跳转内容详情页
│   │   ├─→ content_id: string ← 内容唯一标识
│   │   ├─→ content_type: enum ← 内容类型（post/note/video）
│   │   ├─→ source: enum ← 来源页面（likes_page/comments_page）
│   │   ├─→ interaction_type: enum ← 互动类型（like/comment/favorite）
│   │   └─→ highlight_comment: string ← 需要高亮的评论ID
│   │
│   ├── 跳转通话页面
│   │   ├─→ call_type: enum ← 通话类型（voice/video）
│   │   ├─→ target_user_id: string ← 目标用户ID
│   │   ├─→ conversation_id: string ← 对话ID
│   │   └─→ call_source: enum ← 发起来源（chat_page）
│   │
│   └── 跳转系统功能页
│       ├─→ action_type: enum ← 操作类型（profile_edit/security_check）
│       ├─→ target_section: string ← 目标功能区域
│       ├─→ source_notification: string ← 来源通知ID
│       └─→ required_fields: array ← 必填字段列表

🔄 页面状态传递机制
│
├── 📊 状态保持策略
│   ├─→ 页面栈管理 → 保持页面跳转历史栈
│   ├─→ 状态缓存 → 缓存页面滚动位置和筛选条件
│   ├─→ 数据预加载 → 跳转前预加载目标页面数据
│   └─→ 返回状态恢复 → 返回时恢复之前的页面状态
│
├── 🎯 跨模块状态同步
│   ├─→ 用户在线状态 → 实时同步到所有显示用户的页面
│   ├─→ 未读消息数量 → 同步到底部导航和相关入口
│   ├─→ 关注关系状态 → 同步到发现页和个人中心
│   └─→ 消息设置状态 → 同步到推送模块和隐私设置
│
└── 📱 页面生命周期管理
    ├─→ 页面进入 → 数据刷新 + 状态初始化
    ├─→ 页面活跃 → 实时数据更新 + WebSocket连接
    ├─→ 页面后台 → 暂停非关键更新 + 保持连接
    ├─→ 页面恢复 → 增量数据同步 + 状态恢复
    └─→ 页面销毁 → 清理资源 + 保存必要状态
```

### 🔧 **模块集成技术实现**

```
【技术集成架构】★★★

🏗️ 模块间通信机制
│
├── 📡 事件总线系统
│   ├─→ MessageBus.emit('message:new', messageData)
│   ├─→ MessageBus.emit('user:status_change', userStatus)
│   ├─→ MessageBus.emit('notification:count_update', counts)
│   └─→ MessageBus.on('content:interaction', handleInteraction)
│
├── 📊 全局状态管理
│   ├─→ GlobalStore.messages.unreadCount
│   ├─→ GlobalStore.user.onlineStatus
│   ├─→ GlobalStore.relationships.followingList
│   └─→ GlobalStore.settings.messagePreferences
│
├── 🔌 模块API接口
│   ├─→ MessagesAPI.getUnreadCount()
│   ├─→ MessagesAPI.startConversation(userId)
│   ├─→ MessagesAPI.updateUserStatus(status)
│   └─→ MessagesAPI.syncNotifications()
│
└── 🎯 路由导航系统
    ├─→ NavigationService.navigateToChat(userId, params)
    ├─→ NavigationService.navigateToProfile(userId, source)
    ├─→ NavigationService.handleDeepLink(url, params)
    └─→ NavigationService.goBack(preserveState)

🔐 权限与安全控制
│
├── 🛡️ 跨模块权限验证
│   ├─→ 消息发送权限 → 检查用户关系和隐私设置
│   ├─→ 用户信息访问 → 验证查看权限和好友关系
│   ├─→ 内容互动权限 → 确认内容可见性和操作权限
│   └─→ 功能使用权限 → 验证用户等级和功能开放状态
│
├── 🔒 数据传输安全
│   ├─→ 参数加密传输 → 敏感参数AES加密
│   ├─→ 签名验证 → 跨模块调用签名验证
│   ├─→ 权限令牌 → JWT令牌跨模块传递
│   └─→ 数据脱敏 → 敏感信息脱敏处理
│
└── 🔍 操作日志记录
    ├─→ 跨模块跳转日志 → 记录页面跳转路径和参数
    ├─→ 数据访问日志 → 记录跨模块数据访问行为
    ├─→ 权限验证日志 → 记录权限检查结果
    └─→ 异常处理日志 → 记录跨模块调用异常
```

### 🎯 **典型用户场景与跨模块流程**

```
【用户场景驱动的跨模块流程】★★★

🌟 场景1：首页发现用户 → 私聊互动
│
├── Step 1: 【首页模块】用户浏览推荐用户
│   ├─→ 显示用户卡片（头像/昵称/简介/在线状态）
│   ├─→ 在线状态来源：消息模块实时状态数据
│   └─→ 社交推荐算法：基于消息模块互动历史
│
├── Step 2: 点击「私信」按钮
│   ├─→ 路由跳转：/messages/conversations/new?user_id=123&source=home_recommend
│   ├─→ 参数传递：用户ID + 来源标识 + 推荐理由
│   └─→ 权限检查：隐私设置 + 黑名单状态 + 消息权限
│
├── Step 3: 【消息模块】创建对话
│   ├─→ 检查现有对话：避免重复创建对话
│   ├─→ 初始化对话页面：用户信息 + 历史消息 + 在线状态
│   ├─→ 预置消息建议：基于推荐理由的开场白模板
│   └─→ 实时状态监听：WebSocket连接 + 输入状态同步
│
├── Step 4: 发送首条消息
│   ├─→ 消息内容验证：敏感词过滤 + 长度检查
│   ├─→ 发送消息：POST /api/messages/conversations/{id}/messages
│   ├─→ 实时推送：WebSocket推送给接收方
│   └─→ 状态更新：对话列表置顶 + 未读计数更新
│
└── Step 5: 数据回流更新
    ├─→ 【首页模块】更新用户卡片状态（已联系）
    ├─→ 【个人中心】更新社交统计（新增联系人）
    ├─→ 【推荐算法】记录互动行为（提升推荐权重）
    └─→ 【推送模块】配置推送偏好（新对话推送设置）

🌟 场景2：发现内容互动 → 消息通知
│
├── Step 1: 【发现模块】用户浏览内容动态
│   ├─→ 内容展示：作品/笔记/视频 + 互动统计
│   ├─→ 互动按钮：点赞/收藏/评论/分享
│   └─→ 作者信息：头像/昵称/关注状态
│
├── Step 2: 执行互动操作（点赞/评论）
│   ├─→ 点赞操作：POST /api/content/like + 动画效果
│   ├─→ 评论操作：POST /api/content/comment + 内容验证
│   └─→ 收藏操作：POST /api/content/favorite + 分类选择
│
├── Step 3: 【消息模块】生成通知消息
│   ├─→ 点赞通知：更新赞和收藏消息列表
│   ├─→ 评论通知：更新评论消息列表 + 内容关联
│   ├─→ 收藏通知：更新赞和收藏消息列表
│   └─→ 实时推送：WebSocket推送给内容作者
│
├── Step 4: 作者查看消息通知
│   ├─→ 推送点击：跳转到对应消息分类页面
│   ├─→ 消息列表：显示互动用户 + 内容预览 + 时间
│   ├─→ 点击消息：跳转到内容详情页 + 高亮显示互动
│   └─→ 回复互动：可直接回复评论或私信感谢
│
└── Step 5: 后续互动流程
    ├─→ 【发现模块】更新内容互动数据
    ├─→ 【个人中心】更新用户互动统计
    ├─→ 【推荐算法】记录用户偏好数据
    └─→ 【消息模块】建立用户互动关系链

🌟 场景3：系统通知处理 → 功能跳转
│
├── Step 1: 【系统管理】发布功能更新通知
│   ├─→ 通知生成：标题/内容/操作按钮/目标用户
│   ├─→ 优先级设置：重要/普通/一般 + 过期时间
│   └─→ 推送策略：立即推送/定时推送/静默推送
│
├── Step 2: 【消息模块】接收系统通知
│   ├─→ 通知存储：系统通知页面新增记录
│   ├─→ 未读计数：更新系统通知未读数量
│   ├─→ 实时推送：WebSocket推送给目标用户
│   └─→ 推送通知：生成手机推送通知
│
├── Step 3: 用户查看系统通知
│   ├─→ 推送点击：跳转到系统通知页面
│   ├─→ 通知详情：完整通知内容 + 操作按钮
│   ├─→ 处理操作：立即完善/查看详情/忽略
│   └─→ 状态更新：标记已读 + 处理状态记录
│
├── Step 4: 执行通知操作
│   ├─→ 「立即完善」：跳转到个人中心编辑页面
│   ├─→ 「查看详情」：跳转到相关功能详情页
│   ├─→ 「参与活动」：跳转到活动页面
│   └─→ 「安全验证」：跳转到安全设置页面
│
└── Step 5: 完成处理反馈
    ├─→ 【个人中心】资料完善度更新
    ├─→ 【消息模块】通知处理状态更新
    ├─→ 【系统管理】通知处理率统计
    └─→ 【用户画像】用户活跃度评分更新

🌟 场景4：多端消息同步 → 状态一致性
│
├── Step 1: 用户多设备登录
│   ├─→ 设备A：手机APP登录
│   ├─→ 设备B：平板APP登录
│   ├─→ 设备C：Web版登录
│   └─→ 设备管理：最多5台设备同时在线
│
├── Step 2: 消息状态同步
│   ├─→ 新消息接收：所有设备实时推送
│   ├─→ 已读状态同步：一台设备已读，其他设备同步
│   ├─→ 对话列表同步：置顶/免打扰/删除状态同步
│   └─→ 设置同步：消息设置在所有设备保持一致
│
├── Step 3: 冲突处理机制
│   ├─→ 消息发送冲突：基于时间戳排序
│   ├─→ 状态更新冲突：最后操作优先原则
│   ├─→ 设置冲突：服务端设置为准
│   └─→ 网络异常处理：离线缓存 + 重连同步
│
└── Step 4: 一致性保障
    ├─→ 心跳检测：定期检查设备连接状态
    ├─→ 增量同步：基于版本号的增量数据同步
    ├─→ 全量同步：长时间离线后的全量数据恢复
    └─→ 异常恢复：网络恢复后的数据一致性检查
```

### 🔄 **异常场景处理与容错机制**

```
【异常场景处理流程】★★★

⚠️ 网络异常处理
│
├── 📱 客户端网络断开
│   ├─→ WebSocket断开检测 → 显示离线状态提示
│   ├─→ 消息发送失败 → 本地缓存 + 重发队列
│   ├─→ 数据加载失败 → 显示缓存数据 + 重试按钮
│   └─→ 网络恢复 → 自动重连 + 增量数据同步
│
├── 🔄 跨模块调用失败
│   ├─→ API调用超时 → 降级处理 + 用户提示
│   ├─→ 数据格式错误 → 数据校验 + 默认值填充
│   ├─→ 权限验证失败 → 重新登录 + 权限刷新
│   └─→ 服务不可用 → 功能降级 + 备用方案
│
└── 📊 数据一致性异常
    ├─→ 未读计数不一致 → 强制刷新 + 重新计算
    ├─→ 消息状态异常 → 状态修复 + 历史对比
    ├─→ 用户状态冲突 → 服务端数据为准 + 客户端更新
    └─→ 关系数据异常 → 关系重建 + 权限重新验证

🚨 用户行为异常
│
├── 🛡️ 安全异常处理
│   ├─→ 异常登录检测 → 安全验证 + 登录通知
│   ├─→ 频繁操作检测 → 操作限流 + 验证码验证
│   ├─→ 恶意内容检测 → 内容审核 + 账号警告
│   └─→ 账号异常行为 → 临时限制 + 人工审核
│
├── 🔒 权限异常处理
│   ├─→ 权限过期 → 自动刷新 + 重新验证
│   ├─→ 权限不足 → 权限提升引导 + 功能说明
│   ├─→ 黑名单用户 → 操作拦截 + 状态提示
│   └─→ 隐私设置冲突 → 设置优先级 + 用户确认
│
└── 📋 数据异常处理
    ├─→ 消息内容异常 → 内容过滤 + 发送失败提示
    ├─→ 文件上传异常 → 格式检查 + 大小限制提示
    ├─→ 用户信息异常 → 信息验证 + 更新提醒
    └─→ 关系数据异常 → 关系验证 + 状态修复

🔧 系统异常恢复
│
├── 🏥 自动恢复机制
│   ├─→ 连接断开重连 → 指数退避算法 + 最大重试次数
│   ├─→ 数据同步修复 → 版本对比 + 增量修复
│   ├─→ 状态一致性修复 → 定期校验 + 自动修正
│   └─→ 缓存数据恢复 → 本地缓存验证 + 过期清理
│
├── 👨‍💻 手动恢复选项
│   ├─→ 强制刷新数据 → 用户主动触发全量同步
│   ├─→ 清除本地缓存 → 清理异常数据 + 重新加载
│   ├─→ 重置消息设置 → 恢复默认设置 + 重新配置
│   └─→ 联系客服支持 → 问题反馈 + 人工处理
│
└── 📊 异常监控统计
    ├─→ 异常频率统计 → 异常类型分析 + 趋势监控
    ├─→ 恢复成功率 → 自动恢复效果评估
    ├─→ 用户影响评估 → 异常对用户体验的影响分析
    └─→ 系统稳定性指标 → 整体系统健康度评分
```

---

## 🎨 **设计要点**

### 📱 **UI设计规范**
- **主色调**：紫色#8A2BE2（选中状态）、灰色#999999（未选中）
- **卡片规格**：80x80px + 圆角12px + 2px阴影
- **字体规范**：标题18sp粗体、内容16sp常规、时间12sp
- **间距标准**：16px外边距、6px内容间距、2px偏移量

### 🔄 **交互动效**
- **点击反馈**：0.1s背景变化、0.2s缩放动画
- **状态转换**：0.3s渐入渐出、心跳/震动特效
- **列表滚动**：弹性滚动、下拉刷新、无限加载

### 📊 **状态管理**
- **未读标识**：红色角标 + 数字显示 + 实时更新
- **在线状态**：绿色圆点 + 离线时间 + 实时监听
- **消息状态**：发送中/已发送/已读/失败 四种状态

### 🎯 **子页面设计特点**
- **统一导航栏**：返回按钮 + 页面标题 + 清空功能
- **列表项规格**：80-100px高度 + 一致的布局结构
- **操作按钮设计**：主要操作紫色背景、次要操作边框样式
- **内容预览机制**：2-3行文字预览 + 缩略图展示

### 🔍 **子页面功能特性**
- **赞和收藏页面**：点赞/收藏操作展示 + 内容跳转 + 用户信息查看
- **评论消息页面**：评论内容预览 + 回复互动 + 批量管理功能
- **粉丝消息页面**：关注状态管理 + 三种按钮状态 + 用户互动
- **系统通知页面**：优先级分级 + 操作按钮 + 通知处理流程

### 📊 **子页面交互模式**
- **列表加载**：下拉刷新 + 上滑加载更多 + 无限滚动
- **状态管理**：已读/未读 + 处理/未处理 + 关注/未关注
- **批量操作**：多选模式 + 批量删除 + 批量标记
- **跳转机制**：内容详情 + 用户详情 + 功能页面

### 🚀 **扩展功能特性**
- **私聊对话页面**：实时通信 + 多媒体消息 + 图片展示 + 互动统计 + 状态指示
- **图片消息功能**：大图展示 + 配文支持 + 点赞互动 + 手势操作
- **一键清除功能**：确认对话框 + 警告提示 + 操作不可逆提醒

### 💬 **实时通信特性**
- **消息类型**：文字/图片/语音/视频多种消息类型支持
- **状态指示**：发送中/已发送/已读/失败四种状态清晰展示
- **时间管理**：智能时间分组 + 点击查看详细时间
- **交互增强**：长按菜单 + 消息转发 + 内容复制

---

## 🔧 **技术实现**

### 📡 **核心技术栈**
- **前端框架**：React Native / Flutter
- **状态管理**：Redux / MobX
- **实时通信**：WebSocket / Socket.io
- **数据存储**：SQLite本地 + Redis缓存
- **推送服务**：APNs / FCM

### 🏗️ **架构分层**
```
┌─────────────────────────────────────┐
│           UI表现层                   │  ← 页面组件、交互逻辑
├─────────────────────────────────────┤
│           业务逻辑层                 │  ← 消息处理、状态管理
├─────────────────────────────────────┤
│           数据访问层                 │  ← API调用、本地存储
├─────────────────────────────────────┤
│           服务支撑层                 │  ← 推送、同步、监控
└─────────────────────────────────────┘
```

### 🔐 **安全机制**
- **消息加密**：端到端加密、传输加密
- **内容审核**：敏感词过滤、图片识别
- **权限控制**：用户黑名单、消息权限

---

## 📊 **质量评估**

### ✅ **设计质量检查**
- [x] 树状图层级清晰（4层嵌套）
- [x] 流程图操作完整（包含异常处理）
- [x] 尺寸规格精确（像素级数值）
- [x] 颜色标准统一（HEX色值）
- [x] 动画时长明确（毫秒级）
- [x] 符号使用规范（统一标识）
- [x] 注释说明详细（功能解释）
- [x] 交互逻辑完整（用户视角）

### 📈 **性能指标**
- **页面加载时间**：< 300ms
- **消息发送延迟**：< 100ms
- **内存占用**：< 50MB
- **电池消耗**：< 5%/小时

### 🎯 **用户体验**
- **操作便捷性**：一键直达、手势友好
- **信息清晰度**：层次分明、状态明确
- **响应及时性**：实时更新、即时反馈
- **视觉舒适度**：色彩和谐、动效自然

---

## 📋 **开发指南**

### 🔨 **开发优先级**
1. **P0核心功能**：消息列表、发送接收、实时推送
2. **P1重要功能**：分类消息、状态同步、离线缓存
3. **P2增强功能**：消息设置、数据统计、性能优化
4. **P3子页面功能**：赞和收藏、评论、粉丝、系统通知子页面
5. **P4扩展功能**：私聊对话图片消息、一键清除等扩展功能

### 🧩 **组件复用策略**
- **MessageListItem组件**：可复用的消息列表项，支持点赞/评论/粉丝/通知多种数据类型
- **ActionButton组件**：统一的操作按钮，支持主要/次要样式和多种状态
- **UserAvatar组件**：用户头像组件，支持在线状态、未读角标、操作图标
- **ContentPreview组件**：内容预览组件，支持图片/视频/文字多种类型
- **NavigationBar组件**：统一导航栏，支持返回、标题、清空等功能配置
- **SearchInput组件**：统一搜索输入框，支持实时搜索和历史记录
- **MessageBubble组件**：消息气泡组件，支持发送/接收样式和状态指示
- **ConfirmDialog组件**：确认对话框组件，支持自定义图标、文字和按钮

### 🧪 **测试策略**
- **单元测试**：组件功能、状态管理、工具函数
- **集成测试**：API调用、数据流转、页面跳转
- **UI测试**：界面渲染、交互响应、兼容性
- **性能测试**：加载速度、内存占用、并发处理

### 📚 **文档要求**
- **API文档**：接口定义、参数说明、返回格式
- **组件文档**：Props定义、使用示例、样式说明
- **部署文档**：环境配置、构建流程、发布步骤

---

## 🔄 **版本规划**

### 📅 **开发计划**
- **v1.0**：基础消息功能（4周）
- **v1.1**：分类消息子页面（3周）
- **v1.2**：性能优化增强（2周）
- **v2.0**：高级功能扩展（6周）

### 🎯 **里程碑**
- **Week 1-2**：UI组件开发 + 基础交互
- **Week 3-4**：消息功能 + 实时通信
- **Week 5-6**：子页面开发 + 状态管理
- **Week 7-8**：测试优化 + 性能调优
- **Week 9-10**：发布部署 + 用户反馈

### 📋 **子页面开发细分**
- **Week 5**：赞和收藏页面 + 评论页面开发
- **Week 6**：粉丝页面 + 系统通知页面开发
- **Week 7**：子页面集成测试 + 交互优化

---

## 📞 **联系信息**

- **设计负责人**：UI/UX设计团队
- **开发负责人**：前端开发团队
- **产品负责人**：产品经理团队
- **测试负责人**：QA测试团队

---

*本文档遵循SMART-V+增强原则和4C+1设计标准，确保架构设计的结构化、模块化、抽象化、可复用、可测试、版本化和细节化。*
